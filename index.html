<!DOCTYPE html>
<html>
    <head>
    <title>Setup | Guides Vnda</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" media="all" href="css/bootstrap.css" />
    <link rel="stylesheet" media="all" href="css/screen.css" />
    <link rel="stylesheet" type="text/css" href="css/component.css" />
    <link rel="stylesheet" type="text/css" href="css/featherlights.css" />
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon"/>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/modernizr.custom.js"></script>
    <script src="js/main.js"></script>
  </head>
  <body>
  <div class="tocify-wrapper"><br>
    <img class="logo" src="https://avatars2.githubusercontent.com/u/810902?s=200">
    <div id="sidebar_switch">
      <span class="headings titulo"><a href="/">GUIDES VNDA</a></span>
      <section id="set-6">
        <div class="hi-icon-wrap hi-icon-effect-6 hi-icon-effect-6a">
          <a href="/design" class="hi-icon hi-icon-images um">Criação</a>
          <a href="/setup" class="hi-icon hi-icon-contract dois select">Setup</a>
          <a href="/api" class="hi-icon hi-icon-cog tres">Api</a>
        </div>
       </section>
     </div>
    <div id="headings" class="tocify">
    </div>
  </div>
   <div class="page-wrapper">
    <div class="content">
      <h2 id="entendendo-o-.liquid">Entendendo o .liquid</h2>
      <p>Liquid é a linguagem de programação responsável por implementar os templates desenvolvidos e utilizados pela Vnda.</p>

      <h3 id="filtros">Filtros</h3>
      <p>filtros para alterar a saída de uma váriavel:</p>

      <pre>
subtração  {{ 4 | minus:2 }} #=> 2
      </pre>
      <p>
      minus
      </p>
      <div></div><br>

      <pre>
adição {{ '1' | plus:'1' }} #=> '11', {{ 1 | plus:1 }} #=> 2
      </pre>
      <p>
      plus
      </p>
      <div></div><br>

      <pre>
multiplicação {{ 5 | times:4 }} #=> 20
      </pre>
      <p>
      times
      </p>
      <div></div><br>

      <pre>
divisão {{ 10 | divided_by:2 }} #=> 5
      </pre>
      <p>
      divided_by
      </p>
      <div></div><br>
      <pre>
retorna o elemento da primeira posição do array
      </pre>
      <p>
      first
      </p>
      <div></div><br>

      <pre>
retorna o elemento da última posição do array
      </pre>
      <p>
      last
      </p>
      <div></div><br>

      <pre>
Junta-se aos elementos de uma matriz com o caráter passado como o parâmetro. O resultado é uma única cadeia.

{{ product.tags | join: ',' }}

Retorno:
tag1, tag2, tag3
      </pre>
      <p>
      join
      </p>
      <div></div><br>

      <pre>
sort elements of the array
      </pre>
      <p>
      sort
      </p>
      <div></div><br>

<!--  <pre>
map/collect an array on a given property
      </pre>
      <p>
      map
      </p>
      <div></div><br> -->

<pre>
retorna o tamanho de array ou string

{{ "esta é uma sequência de 38  caracteres" | split: " " | size }}

Retorno:
38
</pre>

<p>
size
</p>
<div></div><br>
<pre>
Codifica uma string

{{ "<span><</span>p>Loren Ipsum<span><</span>/p>" | escape }}

Retorno
<span><</span>p>Loren Ipsum<span><</span>/p>
  </pre>
<p>
escape
</p>
<div></div><br>

<!--  <pre>
returns an escaped version of html without affecting existing escaped entities
      </pre>
      <p>
      escape_once
      </p>
      <div></div><br> -->

<pre>
Remove elementos html da string

{{ "<span><</span>h1>Olá Mundo<span><</span>/h1> World" | strip_html }}

Olá Mundo
</pre>
<p>
strip_html
</p>
<div></div><br>

<pre>
Remove todas as novas linhas (\n) da string
</pre>
<p>
strip_newlines
</p>
<div></div><br>

<pre>
Substitui each newline (\n) with html break(<span><</span>br>)
</pre>
<p>
newline_to_br
</p>
<div></div><br>

<pre>
Substitui todas as ocorrências de uma cadeia com uma substring.
{{ 'Sites Ecommerce' | replace:'Sites','Sites para' }}

Retorno:
Sites para Ecommerce
</pre>
<p>
replace
</p>
<div></div><br>

<pre>
Substitui as primeira ocorrência de uma cadeia com uma substring.

{{ 'barbar' | replace_first:'bar','foo' }}

Retorno:
foobar
</pre>
<p>
replace_first
</p>
<div></div><br>

<pre>
Remove as ocorrência de uma cadeia com uma substring.

{{ 'foobarfoobar' | remove:'foo' }}

Retorno:barbar
</pre>
<p>
remove
</p>
<div></div><br>

<pre>
Remove a primeira ocorrência de uma cadeia com uma substring.

{{ 'barbar' | remove_first:'bar' }}

Retorno:
bar
</pre>
<p>
remove_first
</p>
<div></div><br>

<pre>
Trunca uma cadeia de caracteres para x caracteres. Ele também aceita um segundo parâmetro que será anexada à cadeia
{{ 'foobarfoobar' | truncate: 5, '.' }}

Retorno:
foob.
</pre>

<p>
truncate
</p>
<div></div><br>

<pre>
Trunca uma cadeia de caracteres para x palavras. Ele também aceita um segundo parâmetro que será anexada à cadeia

{{ 'truncar uma cadeia de caracteres para x palavras' | truncatewords: 2 }}

Retorno:
truncar uma
</pre>
<p>
truncatewords
</p>
<div></div><br>

<pre>
Adiciona uma string no final da cadeia de caracteres

{{ 'bar' | prepend:'foo' }}

Retorno:
foobar
</pre>
<p>
prepend
</p>
<div></div><br>

<pre>
Adiciona uma string no inicio da cadeia de caracteres

{{ 'foo' | append:'bar' }}

Retorno:
foobar
</pre>
<p>
append
</p>
<div></div><br>

<pre>
Transforma um string em array de acordo com o valor informado no parâmetro

{{ "a~b" | split:"~" }}

Retorno:
['a','b']

{% assign array = "a~b" | split:"~" %}

{{ array[0] }}
Retorno:
a

{{ array[1] }}
Retorno:
b
</pre>
<p>
split
</p>

<div></div><br>


<pre>
Resto da divisão

{{ 3 | modulo:2 }}

Retorno:
1
</pre>
<p>
modulo
</p>

<pre>
Formata a date

{{ order.received_at | date: '%m/%d/%Y') }}

</pre>
<p>date</p>
<div></div><br>


<pre>
Transforma a primeira letra da cadeia de caracteres em caixa alta

{{ 'loren ipsum loren ipsun' | capitalize }}

Retorno:
Loren ipsum loren ipsun

</pre>
<p>capitalize</p>
<div></div><br>

<pre>
Transforma a cadeia de caracteres em caixa baixa

{{ 'LOREN IPSUN LOREN IPSUN' | downcase }}

Retorno:
loren ipsun loren ipsun
</pre>
<p>downcase</p>
<div></div><br>

<pre>
Transforma a cadeia de caracteres em caixa alta

{{ 'loren ipsun loren ipsun' | upcase }}

Retorno:
LOREN IPSUN LOREN IPSUN
</pre>
<p>
upcase
</p>
<div></div><br>


<h3 id="Tags_nativas">Tags Nativas do .liquid</h3>
<p>Tags são usadas para a lógica, criar variáveis, includes dentre outras técnicas e recurso nativos da linguagem para auxiliar a implementação do seu template. Abaixo está uma lista de tag atualmente suportadas.</p>

<h4 id="assign">{% assign %} - Criando Variáveis</h4>
<pre>
// Criando uma variável

{% assign name = 'freestyle' %}

{{ name }}

Retorno:
freestyle
</pre>
<p>
Criando Variáveis - {% assign %}
</p>
<div></div><br>

<h4 id="capture">{% capture %} - Armazenando conteudo</h4>

<pre>
// Atualizando o conteúdo em lista_produto
{% capture lista_produto %}
  <div> Item 1 </div>
{% endcapture %}
{% capture lista_produto %}
  <div> Item 2 </div>
{% endcapture %}
{% capture lista_produto %}
  <div> Item 3 </div>
{% endcapture %}

{{  lista_produto }}

retorno:
Item 3
</pre>
<p>
O {% capture %} é usado para atualizar conteúdo dentro da variável "nome_da_variavel", contrário da tag <a href="#contentfor" class="laranja">{% contentfor %}</a> que atualiza o conteúdo.
</p>
<div></div><br>

<h4 id="case">{% case %} - Condicional</h4>

<pre>

{% assign condition = 2 %}
{% case condition %}
{% when 1 %}
 caso 1
{% when 2 or 3 %}
 caso 2 ou 3
{% else %}
 nenhum dos casos
{% endcase %}

Retorno:
caso 2 ou 3
</pre>
<p>
A instrução case é usada para executar ações diferentes com base em diferentes condições.
</p>
<div></div><br>


<h4 id="comment">{% comment %} - Comentários</h4>
<pre>
Fizemos 1 milhão de dólares {% comment %} em perdas {% endcomment %} este ano

Retorno:
Fizemos 1 milhão de dólares este ano
</pre>

<p>
Bloco de código que não será carregado na renderização do html na página
</p>
<div></div><br>

<h4 id="cycle">{% cycle %} - Interações no loop  </h4>
<pre>
Lista de Produtos com 5 interações
<span><</span>li class="{% cycle 'one', 'two', 'three' %}">Item {{ forloop.index }}<span><</span>/li>

Retorno:
<span><</span>li class="one">Item 1<span><</span>/li>
<span><</span>li class="two">Item 2<span><</span>/li>
<span><</span>li class="three">Item 3<span><</span>/li>
<span><</span>li class="one">Item 4<span><</span>/li>
<span><</span>li class="two">Item 5<span><</span>/li>
</pre>
<p>
Cycle é usado geralmente dentro de um loop para alternar entre os valores, como cores ou classes css.
</p>
<div></div><br>

<h4 id="for">{% for %} - laço </h4>
<pre>
{% for item in array %}
{{ item }}
{% endfor %}

// When iterating a hash, item[0] contains the key, and item[1] contains the value:

{% for item in hash %}
{{ item[0] }}: {{ item[1] }}
{% endfor %}

Durante cada loop for, as seguintes variáveis auxiliares estão disponíveis para necessidade adicionais

forloop.length      # => tamanho de todo o ciclo for
forloop.index       # => índice da iteração atual
forloop.index0      # => índice da iteração atual (iniciando em zero)
forloop.rindex      # => quantos itens ainda são deixados?
forloop.rindex0     # => quantos itens ainda são deixados?? (iniciando em zero)
forloop.first       # => É esta a primeira iteração
forloop.last        # => É esta a última iteração

Há vários atributos que você pode usar para influenciar os itens que você recebe em seu loop

limite: int permite restringir quantos itens que você recebe. offset: int permite que você comece a coleção com o item enésimo.

# array = [1,2,3,4,5,6]
{% for item in array limit:2 offset:2 %}
{{ item }}
{% endfor %}

Retorno:
3,4

Invertendo o loop
{% for item in collection reversed %} {{item}} {% endfor %}

Em vez de um loop sobre uma coleção existente, você pode definir um intervalo de números para percorrer. O intervalo pode ser definido por ambos os números literais e variáveis:

# if item.quantity is 4...
{% for i in (1..item.quantity) %}
{{ i }}
{% endfor %}

Retorno:
1,2,3,4
</pre>
<p>
Loops em coleções de arrays:
</p>
<div></div><br>


<!-- // -->
<h5 id="break">{% break %} sair da interação</h5>
<p>A linguagem aceita a tag {% break %} para sair d laço de interações, por exemplo: {% for %} nativo da linguagem e até mesmo das tags personalizadas {% tags %}, {% products %}, {% banner %} {% menus %}  etc ...</p>

<!-- // -->
<h5 id="continue">{% continue %} ir para próxima interação</h5>
<p>Pula para o próximo laço da interação use a tag {% continue %}.</p>


<h4 id="if">{% if %} - Condicional</h4>

<pre>
{% if "online" == "online" %}
  online
{% endif %}

Retorno:
online

{% if "online" == "ofline" %}
  ofline
{% elsif "online" == "online" %}
  online
{% endif %}

Retorno:
online

{% if "online" == "ofline" %}
  ofline
{% elsif "online" == "ofline" %}
  online
{% else %}
  ofline
{% endif %}

Retorno:
ofline


</pre>
<p>
If's são usadas para executar ações diferentes com base em diferentes condições.
</p>
<div></div><br>


<h4 id="unless">{% unless %} - Condicional</h4>
<pre>
Criando um array com 5 posições apartir de um string
{% assign array = "1,2,3,4,5" | split: ',' %}

Percorrendo a variável array

{% for i in array %}
  {% unless i == "3" %}
    {{ i }}
  {% endunless %}
{% endfor %}

Retorno:
1,2,4,5

</pre>
<p>
Executação as interação ao menos que o resultado da condição não seja verdadeiro
</p>
<div></div><br>


      <h2 id="templates">Templates</h2>
      <p>Os templates ficam na raiz da pasta compartilhada no Dropbox onde todos os arquivo são salvos na extensão .liquid</p>
      <p>Dentro da raiz ficam os diretórios "images" "stylesheets" "javascript" e "page"</p>
      <p>Dentro do diretórios page/ é gerado os arquivos de extensão .html das página que são criados no admin.</p>
      <p>O conteúdo do LAYOUT.LIQUID estará presente em todos os templates abaixo. Por este motivo, é o local indicado para colocar o cabeçalho e rodapé da loja. Todos os templates abaixo serão incluídos dentro deste layout, usando na variável {{ yield }}.</p>
      <p>Segue abaixo os templates disponíveis na plataforma:</p>
      <!-- // -->


      <h3 id="home.liquid">Home.liquid</h3>
      <p>Este é o template corresponde a página inicial da loja. Aqui podem ser exibidos produtos, banners, menus e qualquer informação que atraia o cliente a navegar no resto do site. -- A variável {{ tag }} conterá a tag de nome "capa", quando esta estiver cadastrada no Painel Administrativo.</p>

      <!-- // -->

      <h3 id="tag.liquid">Tag.liquid</h3>
      <p>Página que exibe produtos relacionados a uma tag. Tag é a forma de categorização utilizada pela Vnda para organizar os produtos. </p>
      <pre>
        {{ tag.id }}
        {{ tag.name }}
        {{ tag.title }}
        {{ tag.subtitle }}
        {{ tag.description }}
        {{ tag.type }}
        {{ tag.image_url }}
      </pre>
      <p></p>
      <p>Dentro do template tag.liquid é possível exibir informações da tag em questão, que foram cadastradas no admin usando as seguintes variáveis:</p>
      <p>
        Nesse template é muito comun usar banners de posição de tag.<br>
        basta criar uma variável com o nome da tag e chamar esta posição de banner.<br>
      </p>
      <pre>
      {% assign banner_tag_name = "categoria-" | append: tag.name %}
      {% banners position:banner_tag_name %}
      ....
      {% endbanners %}
      </pre>
      <h4 id="listar-produtos">Listar produtos</h4>
      <pre>
{% products tag:tag.name parent_tag:parent_tag.name page:params.page %}
  ...
{% endproducts %}
      </pre>
      <p>Listagem de produtos com a tag <a href="#products" class="laranja">{% products %}</a><br/><br/><br/><br/></p>
      <!-- // -->

<h4 id="paginacao-na-tag">Configurando a páginação na tag</h4>
<pre>
{% products tag:tag.name page:params.page per_page:20 %}
// executa no primeiro loop
{% if forloop.first %}
<span><<span>ul class="products"><span>
{% endif %}
// include com o arquivo com a listagem de produtos
{% include "list_product" %}
// executa no último loop
{% if forloop.last %}
<span><</span>/ul>
{% contentfor paginacao %}
// armazena o conteúdo de "<span><</span>nav>" para dentro variável <strong>paginacao</strong>
{% if pagination.total_pages > 1 %}
<span><</span>nav class="pagination"<span>></span>
<span><</span>span class="pagination"<span>></span>
    Página {{ pagination.current_page }} de {{ pagination.total_pages }}
    {% if pagination.prev_page %}
        <span><</span>a href="{{ pagination.prev_url }}" class="previous"<span>></span>←<span><</span>/a<span>></span>
    {% endif %}
    {% for page in pagination.pages %}
      <span><</span>li class="{% if current_url == page.url %} active {% endif %}"><span><</span>a href="{{ page.url }}">{{ page.number }} {% if current_url == page.url %}{% endif %}</a></li>
    {% endfor %}
    {% if pagination.next_page %}
        <span><</span>a href="{{ pagination.next_url }}" class="next"<span>></span>→<span><</span>/a<span>></span>
    {% endif %}
<span><</span>/span<span>></span>
<span><</span>/nav<span>></span>
{% endif %}
{% endcontentfor %}
{% endif %}
{% endproducts %}

// exibe o conteúdo da variável <strong>paginacao</strong>s
<span><</span>div>{{ paginacao }}<span><</span>/div>
</pre>
<p>O código da paginação deve ser executado pelo menos 1 vez dentro do loop de % products, o mesmo que é usado para carregar uma listagem de produtos.<br>ex: {% products %} {% if forloop.last %} // código {% endif %}{% endproducts %}</p>
<p>Use o {% if forloop.first %} ou {% if forloop.last %} incluir o script de paginação.</p>
<p>**importante: use o {% contentfor %} para armazenar o bloco da páginação e chamar em outra parte do código:</p>
<p>**a páginação funcionára só para páginas de tag.</p>
<p>**Por padrão, a tag é páginada em 25 itens. Para alterar, basta inserir um valor diferente para o parâmentro [ per_page: ] conforme mostrado no exemplo.</p>
<p>** É possível limitar a quantidade de itens de uma tag, usando o parâmetro [ limit:Valor_desejado]. Este limite desativa a paginação. É útil na página de busca, caso alguma busca possa retornar muitos resultados, para evitar perda de perorma</p>

      <!-- // -->

      <h3 id="product.liquid">Product.liquid</h3>
      <p>Template para exibição do produto, suas imagens, produtos relacionados. Aqui também fica o formulário que permite adicionar o item ao carrinho, neste formulário o cliente pode selecionar qual atributo do produto (cor, tamanho, etc) ele realmente quer.</p>
      <p>Para exibir o nome, preço, remarcações, disponibilidade, parcelas  utilize  tags dentro do loop <a href="#products" class="laranja">{% product %}</a></p>

<pre>
{{ product.name }}
// Nome do produto

{{ product.slug }}
// Slug da url do produto

{{ product.url }}
// Url absoluta do produto

{{ product.updated_at }}
// Data da última atualização

{{ product.id }}
// ID numeral do produto

{{ product.reference }}
// Referência do produto

{{ product.sku }}
// SKU principal - Para exibir demais sku(s), usar tag variants

{{ product.available }}
// Disponibilidade (true/false)

{{ product.stock }}
// Quantidade em estoque

{{ product.min_quantity }}
// Quantidade mínima para compra

{{ product.price | money_format }}
// Preço normal

{{ product.on_sale }}
// Se esta em promoção (true/false)

{{ product.sale_price money_format }}
// Preço promocional

{{ product.discount_id }}
// ID de desconto, para exibir texto diferenciado

{{ product.installments }}
// Opções de parcelamento

{{ product.description }}
// Descrição do produto

{{ product.rating }}
// Avaliação - Em fase de testes

{{ product.variants }}
// Variantes do produto - Obsoleto

{{ product.image_url }}
// Imagem principal do produto

{{ product.tag_names }}
// Exibe o slug das tags presentes no produto

{{ product.category_tags }}
// Exibe um loop contendo informações das tags tipadas.

Exemplo:
{% for category in product.category_tags %}
  {% if category.tag_type == "nome-do-tipo-da-tag" %}
    {{ category.name }}
    {{ category.title }}
  {% endif %}
{% endfor %}
</pre>
      <!-- // -->
      <h4 id="enviar-produto-ao-carrinho">Enviar produto ao carrinho</h4>
      <p>
        **As configurações de atributo devem estar ativadas no admin.
      </p>
      <p><img src="/img/atributos.jpg"></p>
      <p>***quando o atributo nao é marcado como "opcional de compra" nao é obrigatório montar o sku apartir do valor contido neste atributo.</p>
      <pre>
<span><</span>form action="{{ cart_item_url }}" method="post"<span>></span>
  <span><</span>input type="hidden" name="sku">
  <span><</span>input type="number" name="quantity" value="1">
<span><</span>/form>
      </pre>
      <p>Enviar um <b>formulário com action {{ cart_item_url }}</b> e os campos sku e quantidade obrigatórios.</p>
      <div></div><br>
      <p>Para acessar os atributos é preciso usar a tag  <b>{% variants %}</b> ou carregá-los via <b>javascript</b> injetando os elementos de seleção no html, para isto basta iniciar um variável no seu arquivo.js como por ex:<br> variant = vnda.variants.all().</p>
      <p>** Importante ter noções de programação orientada a objetos<br>

        <a href="#produto-com-2-atributos" class="laranja">Exemplo de uso para um produto com 2 atributos</a>

      </p>
      <pre>
// No .liquid
{% variants product_id:product.id %}
{{variant.properties["property1"]["value"]}}
{{variant.properties["property2"]["value"]}}
{% endvariants %}

// Arquivo .js
$(function(){
  // variável que recebe os objetos com as informaçoes de cada variante
  variants = vnda.variants.all()
})
      </pre>
      <!-- // -->
      <!-- <h5 id="montar-enviar-o-sku">Montar/Enviar o Sku</h5>   -->

       <h5 id="listar-variantes-de-um-atributo">Listar variantes de um atributo</h5>
      <pre>
// Variantes do produtos
camiseta tamanho M #000
camiseta tamanho M #fff
camiseta tamanho M #333
camiseta tamanho G #000
camiseta tamanho G #333

// Quais as variantes com tamanho M?
$(function(){
  variants = vnda.variants.all()
  var array = vnda.variants.find({Tamanho: "M" })
  // variável array recebe o objeto json com todas as informações
  // de variante com tamanho M
  // apartir desses dados é possível montar o html
  // com todas as cores desse atributo
})

      </pre>
      <p>Para exibir as variantes que pertencem ao um mesmo atributo usamos o javascript.</p>
      <p>**só para os casos de produtos com mais de 1 atributo</p>

      <h5 id="como-montar-montar-o-sku">Como montar o sku?</h5>
      <p>
         Como já dito antes, para que um item seja adicionado ao carrinho é preciso enviar um campo com o valor do sku da variante(há casos que é preciso montar um sku) e enviar para o url "/carrinho/adicionar".
      </p>

      <pre>
$(function(){
  // filtro que retorna variantes com o rgb #000
  vnda.variants.find({Cor: "#000" })
})
      </pre>

      <div></div><br>

      <p>Para montar e/ou enviar o sku para /carrinho/adicionar vai depender da quantidade de atributos do produto ou escopo do projeto, sendo viável carregar via js ou tag por .liquid.</p>

      <p><b>LISTANDO O SKU</b></p>
      <p>** Para produtos com 1 variante</p>
      <pre>

{% variants product_id:product.id %}
  {{ variant.sku }}
{% endvariants %}

ou

$(function(){
  // variável que recebe os objetos com as informaçoes de cada variante
  var variants = vnda.variants.all()
  // acessando a propriedade sku do objeto
  variants.sku
})
      </pre>
      <p>
       Método mais simples, é recomendável usar a tag {{ variant.sku }} do .liquid no loop <a class="laranja" href="#variants">{% variants %}</a>.
      </p>
      <div></div><br>
      <p>**Para produtos com mais de uma variante</p>
      <p>
        Podemos dividir em 2 casos: os <b>produtos com 1 ou 2 atributos.</b>
      </p>
      <pre>
// montar o sku com 1 atributos
variantes do produto:
camiseta tamanho M
camiseta tamanho G
camiseta tamanho GG

Qual o sku da variante com tamanho G?

$(function(){
  variants = vnda.variants.all()
  // lista o valor de sku para a variante com o tamanho G
  vnda.variants.find({Tamanho: "G"})[0].sku
})

// montar o sku com 2 atributos
camiseta tamanho M  #000
camiseta tamanho M  #fff
camiseta tamanho M  #333

Qual o sku da variante com tamanho M  e cor #000 ?

$(function(){
  variants = vnda.variants.all()
  // lista o valor de sku para a variante com o tamanho G
  vnda.variants.find({Tamanho: "G", Cor:"#000" })[0].sku
})
      </pre>


      <div></div><br>

      <!-- // -->

      <h4 id="mensagem-de-erro">Mensagem de Erro</h4>
      <pre>
{% if flash.cart.error  %}{{ flash.cart.error }}{% endif %}
      </pre>
      <p>
        Quando existir algum erro no formulário de compra »
      </p>
      <!-- // -->

      <h4 id="listar-imagens-do-produto">Listar imagens do produto</h4>
      <pre>
{% images %}
  {{ image.url }}
{% endimages %}
      ou
{% images sku:sku %}
  {{ image.url }}
{% endimages %}
    </pre>
    <p>Para exibir todas imagens cadastradas de um produto deve-se utilizar o tag {% imagens %}. Se prefirir listar apenas as imagens de uma variante x, utilize o parâmetro "sku"
    {% images sku:sku %} <a href="#trocar-imagem-principal-por-variante-selecionada" title="Trocar imagem principal por variante selecionado" class="laranja">mais detalhes aqui</a>.</p>
    <h4 id="produtos-também-vistos">Produtos Também Vistos</h4>
    <pre>
{% also_viewed id:product.id key:session_id %}
{{ product }}
{% endalso_viewed %}
      </pre>
      <p>* geralmente utilizado na página de produto</p>
      <!-- // -->

      <h3 id="cart.liquid">Cart.liquid</h3>
      <p>1ª etapa do processo de compra. <br>
      Neste template é listados os produtos do carrinho que ficam armazenados na váriavel {{ cart }}, o resumo do carrinho(padrão no layout), o campo input para o cálcudo do CEP e o formulário de frete(métodos de entrega).<p>
      <pre>
{% if cart.items_count > 0 %}
  {{ cartitems }}
{% else %}
  Carrinho Vazio
{% endif %}
      </pre>
      <p>* O campo do CEP só deve aparecer quando o carrinho possuir ao menos 1 item adicionado. Para verificar use {% if cart.items_count > 0 %} no .liquid.</p>
      <div></div><br>
      <!-- // -->

      <h4 id="atualizar-item-do-carrinho">Atualizar item do carrinho</h4>
      <pre>
<span><</span>form action="{{ cart_url }}" method="post"<span>></span>
  <span><</span>input type="hidden" name="_method" value="patch" /<span>></span>
  <span><</span>input type="hidden" name="item_id" value="999" /<span>></span>
  <span><</span>input type="hidden" name="quantity" value="1" /<span>></span>
  <span><</span>input type="submit" value="Alterar"/<span>></span>
<span><</span>/form<span>></span>
      </pre>
      <p>Para alterar a quantidade  de item do carrinho,
        você precisa fazer um POST para a URL definida na variável {{ cart_url }}<br>
      </p>
      <!-- // -->

      <h4 id="remover-item-do-carrinho">Remover item do carrinho</h4>
      <pre>
<span><</span>form action="{{ cart_url }}" method="post"<span>></span>
  <span><</span>input type="hidden" name="_method" value="Delete" /<span>></span>
  <span><</span>input type="hidden" name="item_id" value="999" /<span>></span>
  <span><</span>input type="submit" value="Excluir"/<span>></span>
<span><</span>/form<span>></span>
      </pre>

        <p>Para Remover um produto do carrinho,
            você precisa fazer um POST para a URL definida na variável {{ cart_url }},
            passando dois campos:<br>
          * item_id: Id do item selecionado pelo usuário<br>
          * _method: Informar o value "Delete"
        </p>
        <div></div><br>
      <pre>
  $.post("{{ cart_url }}", { item_id: 999, cart_method: "Delete" }, function() {
    alert("Produto Removido com sucesso");
  });
      </pre>
      <p>Ou via AJAX:</p>
      <!-- // -->

      <h4 id="calcular-frete">Calcular frete</h4>
      <pre>
<span><</span>form action="{{ shipping_zip_url }}" method="post"<span>></span>
  <span><</span>fieldset<span>></span>
    <span><</span>p<span>></span>
      <span><</span>input  type="text" name="zip" value="{{ shipping_address.zip }}"<span>></span>
      <span><</span>button type="submit" name="submit-cep"<span>></span>Calcule seu frete<span><</span>/button<span>></span>
    <span><</span>/p<span>></span>
  <span><</span>/fieldset<span>></span>
 <span><</span>/form<span>></span>
      </pre>
      <p>Utilizar o {{ shipping_zip_url }} na action * validar cep pode ser utilizado o flash.zip.error</p>
      <div></div><br>
      <pre>
{{ flash.zip.error }} // exibe mensagem de erro padrão
  ou
{% if flash.zip.error %}
  ....
{% endif %}
      </pre>
      <p>Quando existir algum erro no calculo do frete >></p>
      <!-- // -->

      <h4 id="método-de-entrega">Método de entrega</h4>
      <pre>
// se o frete já foi calculado
// exibe no html o formulário com os métodos de
{% if shipping_address.zip %}
  <span><</span>form action="{{ shipping_method_url }}" method="POST">
    {% shippingmethods %}
      <span><</span>input type="radio" name="type" value="{{ shipping_method.value }}"">
      {{ shipping_method.name }}
      {{ shipping_method.price | money_format }}
      {{ shipping_method.description }}
      <a href="#tag-do-valor-que-falta-para-frete-grátis" class="gray">//valor que falta para o frete grátis</a>
      {{  shipping_method.value_needed_to_discount }}
    {% endshippingmethods %}
{% endif %}
  <span><</span>form>
      </pre>
      </pre>
      <p>
         Faça um form com action "{{ shipping_method_url }} e com input type radio com name="type".
      </p>
      <p>
        Não avançar nas etapas do carrinho sem ao menos um método escolhido<br>
      </p>
      <!-- -->
      <h4 id="cupom-de-desconto">Cupom de Desconto</h4>
      <pre>
{% if template == "cart" %}
  {% unless shipping_address.zip %}
    <span><</span>form action="{{ coupon_url }}" method="post" class="coupon-form">
        <span><</span>fieldset>
            <span><</span>label for="coupon-code" class="coupon-label">INSIRA SEU CUPOM DE DESCONTO<span><</span>/label<span>></span>
            <span><</span>input type="text" name="code" id="coupon-code" value="{{ cart.coupon_code }}"<span><</span>span>></span>
            <span><</span>button type="submit" class="ir">OK<span><</span>/button<span>></span>
        <span><</span>/fieldset<span>></span>
    <span><</span>/form<span>></span>
{% endunless %}
{% endif %}
      </pre>
      <p>* O cupom de desconto só deve aparecer neste template, umas das formas é verificando se a tag "template" é igual a "cart" e se o cep ainda não foi informado.<br></p>
      <p>O form de cupom de desconto deve usar a action {{ coupon_url  }}</p>
      <div></div><br />
      <p><strong>Formulário de Cupom de Desconto</strong></p>
      <pre>
  <span><</span>form action="{{ coupon_url }}" method="post" class="coupon-form">
      <span><</span>fieldset>
          <span><</span>label for="coupon-code" class="coupon-label">INSIRA SEU CUPOM DE DESCONTO<span><</span>/label<span>></span>
          <span><</span>input type="text" name="code" id="coupon-code" value="{{ cart.coupon_code }}"<span><</span>span>></span>
          <span><</span>button type="submit" class="ir">OK<span><</span>/button<span>></span>
      <span><</span>/fieldset<span>></span>
  <span><</span>/form<span>></span>
      </pre>
      <p>O form de cupom de desconto deve usar a action {{ coupon_url  }}</p>
      <div></div><br>

      <pre>
{% if flash.coupon.error %}
  {{ flash.coupon.error }}
{% endif %}
      </pre>
      <p>Quando existir algum erro no formulário de cupom de desconto &raquo;</p>

      <div></div><br>
      <p>Ápós o preechimento do CEP a url da loja é redirecionada para /frete. Também é listado o conteúdo da variável {{ shipping_method }} que contém os dados para montar o html do formulário de frete.<br> * use no action {{ shipping_method_url }} <span class="summary"><code><a href="{% shippingmethods %}" class="laranja">&raquo; ver implementação no .liquid</a></code></span></p>
      <p>Após validar e enviar o formulário do frete o site é redirencionado para a próxima etapa.</p>
      <!-- // -->

      <h3 id="address.liquid">Address.liquid</h3>
      <p>3ª etapa do processo de compra</p>
      <p>Template onde é exibido o formulário responsável por capturar as informações para entrega do pedido, assim como dados pessoais do cliente, como e-mail e CPF.</p>
      <!-- // -->

      <h4 id="salvar-dados-do-endereço">Salvar dados do Endereço</h4>
      <p>A plataforma Vnda permite que pedidos sejam feitos tanto para pessoas físicas, quanto jurídicas. O que define quando é um ou outro é o campo documents, se ele possuir a chave cpf e for um CPF válido, então é pessoa física, se ele possuir a chave cnpj e for um CNPJ válido, é pessoa júridica.</p>
      <pre>
<span><</span>form action="{{ shipping_address_url }}" method="POST"<span>></span>
  ...
<span><</span>/form<span>></span>
      </pre>
      <p>O formulário deve ser enviado para a URL definida na variável {{ shipping_address_url }}. Ao enviar dados para entrega e cobrança utilize a váriavel {{ addresses_url }} <a href="#dados-para-cobranca" title="Dados para cobrança"class="laranja">mais detalhes aqui</a></p></p>
      <div></div><br />
      <!-- // -->

      <h4 id="pessoa-física">Pessoa Física</h4>
      <p>O cadastro de pessoa fisica, exige os seguinte campos:</p>
      <p>Antes de confirir a tabela abaixo, é importante para seu conhecimento compreender que os campos <i class="laranja">zip</i> e <i class="laranja">state</i> são sempre extraídos do CEP que foi informado pelo cliente e não podem ser alterado sem que o CEP seja informado novamente e o frete seja recalculado.</p>
      <table>
        <thead>
        <tr>
          <td style="width:160px;">Input "name"</td>
          <td>Descrição</td>
        </tr>
        </thead>
          <tr title="value={{ shipping_address.first_name }}">
            <td>first_name</td>
            <td>Primeiro nome do cliente.</td>
          </tr>
          <tr title="value={{ shipping_address.last_name }}">
            <td>last_name</td>
            <td>Sobrenome do cliente.</td>
          </tr>
          <tr title="value={{ shipping_address.email }}">
            <td>email</td>
            <td>Um e-mail válido.</td>
          </tr>
          <tr title="value={{ shipping_address.documents.cpf }}">
            <td>documents[cpf]</td>
            <td>CPF válido.</td>
          </tr>
          <tr title="value={{ shipping_address.first_phone_area }}">
            <td>first_phone_area</td>
            <td>Código de área do um telefone do cliente.</td>
          </tr>
          <tr title="value={{ shipping_address.first_phone }}">
            <td>first_phone</td>
            <td>Número de um telefone do cliente.</td>
          </tr>
           <tr title="value={{ shipping_address.second_phone_area }}">
            <td>second_phone_area</td>
            <td>Código de área do um telefone do cliente.</td>
          </tr>
          <tr title="value={{ shipping_address.second_phone }}">
            <td>second_phone</td>
            <td>Número de um telefone do cliente.</td>
          </tr>
          <tr title="value={{ shipping_address.street_name }}">
            <td>street_name</td>
            <td>Nome da rua que o pedido será enviado.</td>
          </tr>
          <tr>
            <td title="value={{ shipping_address.street_number }}">street_number</td>
            <td>Número da casa/prédio que o pedido será enviado.</td>
          </tr>
          <tr title="value={{ shipping_address.neighborhood }}">
            <td >neighborhood</td>
            <td>Nome do bairro que o pedido será enviado.</td>
          </tr>
          <tfoot>
            <tr>
              <td class="title"><span class="laranja">**Campos opcionais</span></td>
              <td class="title">Descrição</td>
            </tr>
            <tr title="value={{ shipping_address.cellphone_area }}">
              <td>cellphone_area</td>
              <td>Código de área de um celular do cliente.</td>
            </tr>
             <tr title="value={{ shipping_address.cellphone }}">
              <td>cellphone</td>
              <td>Número de um telefone celular do cliente.</td>
             </tr>
             <tr>
              <td>complement</td>
              <td>Informação como número apartamento/casa/lote do cliente. Ou qualquer outra informação necessária para a entrega do pedido.</td>
            </tr>
          </tfoot>
     </table>
     <p style="text-align:right">tabela 1.1</p>
     <!-- // -->

      <h4 id="pessoa-júridica">Pessoa Júridica</h4>
      <p>O cadastro de pessoa júridica necessita dos seguintes campos:</p>

      <p>Esse cadastro ainda pode ter os mesmos campos opcionais que o cadastro de pessoa fisica tem, além de seguir a mesma regra para os campos <i>city</i> e <i>state</i>.</p>
      <p>O campo documents permite que você envie até cinco tipos de documentos diferentes. Você pode solicitar no cadastro documentos como, por exemplo, <i>RG e/ou Inscrição Estadual.</i></p>

      <table>
      <thead>
      <tr>
        <td>Input "name"</td>
        <td>Descrição</td>
      </tr>
      </thead>
      <tr>
        <td title="value={{ shipping_address.first_name }}">first_name</td>
        <td>Primeiro nome da pessoa que está realizando a compra.</td>
       </tr>
       <tr>
        <td title="value={{ shipping_address.last_name }}">last_name</td>
         <td>Sobrenome da pessoa que está realizando a compra.</td>
       </tr>
       <tr>
        <td title="value={{ shipping_address.company_name }}">company_name</td>
        <td>Nome da empresa.</td>
       </tr>
       <tr>
        <td title="value={{ shipping_address.email }}">email</td>
        <td>Um e-mail válido.</td>
       </tr>
       <tr>
        <td title="value={{ shipping_address.documents.cnpj }}">documents[cnpj]</td>
        <td>CNPJ válido.</td>
       </tr>
        <tr title="value={{ shipping_address.first_phone_area }}">
          <td>first_phone_area</td>
          <td>Código de área do telefone da empresa.</td>
        </tr>
        <tr title="value={{ shipping_address.first_phone }}">
          <td>first_phone</td>
          <td>Número do telefone da empresa.</td>
        </tr>
        <tr title="value={{ shipping_address.street_name }}">
          <td>street_name</td>
          <td>Nome da rua que o pedido será enviado.</td>
        </tr>
        <tr title="value={{ shipping_address.street_number }}">
          <td>street_number</td>
          <td>Número da casa/prédio que o pedido será enviado.</td>
        </tr>
        <tr title="value={{ shipping_address.neighborhood }}">
          <td>neighborhood</td>
          <td>Nome do bairro que o pedido será enviado.</td>
        </tr>
      </table>
       <p style="text-align:right">tabela 1.2</p>
       <!-- // -->

       <h4 id="dados-para-cobranca">Dados para cobrança/entrega</h4>

       <p>Formulários com dados diferentes para <b>cobrança</b> e <b>entrega</b>, respectivamente serão diferenciados
       pelas variáveis "billing_address" ou "shipping_address".</p>
       <p><b>Atenção:</b> neste caso o action do formulário da página de endereço deve mudar para "/enderecos" = {{ addresses_url }} </p>
       <p>Dados para Cobrança</p>
       <table>
          <thead>
          <tr>
            <td style="width:160px;">Atributo "name"</td>
            <td>Atributo "value"</td>
          </tr>
          </thead>
          <tr>
            <td>billing_address[first_name] </td>
            <td>{{ billing_address.first_name }}</td>
          </tr>
          <tr>
            <td>billing_address[last_name] </td>
            <td>{{ billing_address.last_name }}</td>
          </tr>
          <tr>
            <td colspan="2">...</td>
          </tr>
        </table>
        <p>Dados para entrega</p>
       <table>
          <thead>
          <tr>
            <td style="width:160px;">Atributo "name"</td>
            <td>Atributo "value"</td>
          </tr>
          </thead>
          <tr>
            <td>shipping_address[first_name] </td>
            <td>{{ shipping_address.first_name }}</td>
          </tr>
          <tr>
            <td>shipping_address[last_name] </td>
            <td>{{ shipping_address.last_name }}</td>
          </tr>
          <tr>
            <td colspan="2">...</td>
          </tr>
        </table>
        <p>Dados para Entrega e Pagamentos são os mesmo?</p>
        <p> Para que os campos de entrega e cobrança sejam o mesmo não é necessário usar a variável "billing_address",
           utilize no value "shipping_address.[nome_do_campo]", automaticamente o sistema
           usará os mesmos dados de entrega para cobrança.</p>
       <table>
          <thead>
          <tr>
            <td style="width:160px;">Atributo "name"</td>
            <td>Atributo "value"</td>
          </tr>
          </thead>
          <tr>
            <td>first_name</td>
            <td>{{ shipping_address.first_name }}</td>
          </tr>
          <tr>
            <td>last_name</td>
            <td>{{ shipping_address.last_name }}</td>
          </tr>
          <tr>
            <td colspan="2">...</td>
          </tr>
        </table>
        <p style="text-align:right">tabela 1.3</p>


<pre style="background-color:transparent !important">





</pre>
      <!-- // -->

      <h3 id="payment.liquid">Payment.liquid</h3>
      <p> 3ª etapa do processo de compra. Aqui o cliente informa os dados do cartão de crédito ou dá inicio a geração do boleto. </p>
      <!-- // -->

      <h4 id="enviar-dados-para-pagamento">Enviar dados para pagamento</h4>
      <pre>
<span><</span>form action="{{ payment_url }}" method="POST"<span>></span>
  …
<span><</span>/form<span>></span>
      </pre>
      <p>
      O form usado para enviar esses dados deve estar com o atributo action definido para o valor da variável {{ payment_url }}, dessa forma
      </p>

      <h5 id="cartão-crédito">Cartão Crédito</h5>
      <p>Para enviar dados de pagamento usando cartão de crédito, os seguintes campos são obrigatórios:</p>
      <p>O form usado para enviar esses dados deve estar com o atributo action definido para o valor da variável {{ payment_url }}, dessa forma:</p>
      <p>Caso a transação seja efetuada com sucesso, o cliente é automaticamente redirecionado para a página de conclusão da compra.</p>

      <table>
      <thead>
        <tr>
          <td>Input "name"</td>
          <td>Descrição</td>
        </tr>
      </thead>
      <tr>
        <td>payment_method</td>
        <td>O valor desse campo deve ser sempre <b class="laranja">credit</b> para compras com cartão de crédito.</td>
      </tr>
      <tr>
        <td>card_flag</td>
        <td> É bandeira do cartão do cliente, ele deve selecionar isso em campos do tipo select ou radio.</td>
      </tr>
      <tr>
        <td>card_number</td>
        <td>Campo onde o cliente informa o número do cartão.</td>
      </tr>
      <tr>
        <td>card_code</td>
        <td>Campo para o código de segurança do cartão.</td>
      </tr>
      <tr>
        <td>card_owner_name</td>
        <td>Campo onde o cliente informa o nome impresso no cartão.</td>
      </tr>
      <tr>
        <td>card_month</td>
        <td>Número mês que vence o cartão do cliente.</td>
      </tr>
      <tr>
        <td>card_year</td>
        <td>Número do ano, começando no ano atual, que vence o cartão do cliente.</td>
      </tr>
      <tr>
        <td>installments</td>
        <td>Número de parcelas que o cliente deseja fazer a compra.</td>
      </tr>
      </table>

      <h6 id="Listar as parcelas">Listar as parcelas</h6>
      <pre>
{% installments %}
  <span><</span>input type="radio" name="installments" value="{{ installment.number }}" />
  {{ installment.number }}x de
  {{ installment.price | money_format }}
  {% if installment.interest %}
    juros {{ installment.interest_rate }} a.m. ({{ installment.total | money_format}})
  {% else %}
    sem juros
  {% endif %}
{% endinstallments %}
      </pre>

      <p>Para listar as parcelas utilize a variável "installments".</p>
      <p>*Dentro do loop "installments" verificar se há juros.</p>

      <h4 id="dados-para-teste">Dados para teste</h4>
      <pre>
Visa
<ul>
  <li>Número: <strong>4012001038443335</strong></li>
  <li>Código de Segurança: <strong>123</strong></li>
  <li>Vencimento: <strong>05/2018</strong></li>
  </li>
</ul>
      </pre>
      <p>
        Para efetuar testes no ambiente de testes da Vnda, você pode usar os seguintes números de cartão de crédito (esses números são os mesmos fornecidos pela Cielo no manual do desenvolvedor):
      </p>
      <p>Para que as transações sejam autorizadas pela Cielo no ambiente de testes, o total do pedido não deve conter centavos (R$ 100,23, por exemplo). Caso contrário, todas as transações serão negadas.</p>
      <div></div><br>
      <pre>
Mastercard
  <ul>
    <li>Número: <strong>5453010000066167</strong></li>
    <li>Código de Segurança: <strong>123</strong></li>
    <li>Vencimento: <strong>05/2018</strong></li>
  </ul>
</pre>
<div></div><br>
      <pre>
Diners Club
<ul>
  <li>Número: <strong>36490102462661</strong></li>
  <li>Código de Segurança: <strong>123</strong></li>
    <li>Vencimento: <strong>05/2018</strong></li>
</ul>
</pre>
<div></div><br>
      <pre>
Amex
<ul>
  <li>Número: <strong>376449047333005</strong></li>
  <li>Código de Segurança: <strong>1234</strong></li>
  <li>Vencimento: <strong>05/2018</strong></li>
</ul>
  </pre>
      <pre>Discover
<ul>
  <li>Número: <strong>6011020000245045</strong></li>
  <li>Código de Segurança: <strong>123</strong></li>
  <li>Vencimento: <strong>05/2018</strong></li>
</ul>
      </pre>
      <div></div><br>
      <pre>
Elo
<ul>
  <li>Número: <strong>6362970000457013</strong></li>
  <li>Código de Segurança: <strong>123</strong></li>
  <li>Vencimento: <strong>05/2018</strong></li>
</ul>
      </pre>
      <!-- // -->

      <h5 id="boleto">Boleto</h5>
      <pre>
payment_method: O valor desse campo deve ser sempre <b class='laranja'>slip</b> para compras com no boleto.

      </pre>
      <p>O pagamento do boleto necessita apenas o campo:</p>
    <!-- // -->

      <h3 id="finished.liquid">Finished.liquid</h3>
      <p>Esta é a última etapa do processo de compra. Aqui são exibidas as informações do pedido, como o número e/ou o link para impressão do boleto, junto com a mensagem de conclusão da compra. Para exibir as informaóes do pedido, podemos usar estas duas variáveis: {{ client }} | {{ order } </p>
    <!-- // -->

      <h3 id="account.liquid">Account.liquid</h3>
      <p>Template usado para exibir os dados da conta do cliente, os pedidos efetuados, assim como a situação deles. Nesta página o cliente também pode alterar os dados pessoais, como nome, e-mail e senha. </p>
      <p>Os dados do pedido ficam armezados na variável {{ order }}<br><span class="summary"><code><a href="#orders" class="laranja">&raquo; ver implementação no .liquid</a></code></span></p>
      <pre>
<span><</span>form action="{{ account_url }}" method="post"<span>></span>
   <span><</span>input type="text" name="email" value="{{ client.email }}"<span>></span>
  <span><</span>input type="text" name="password" <span>></span>
  <span><</span>input type="text" name="password_confirmation" <span>></span>
  <span><</span>input type="checkbox" name="terms"<span>></span>
<span><</span>/form<span>></span>
      </pre>
      <p>Para alterar  os dados pessoais crie um form com o action {{ account_url }} e envie os dados nome, email, senha.</p>

      <h4 id="formulário-de-atualizar Senha">Formulário para Atualizar Senha</h4>
      <pre>
<span><</span>form action="{{ account_url }}" method="post""<span>></span>
  <span><</span>input type="text" name="{{ client.email }}" <span>></span>
  <span><</span>input type="text" name="password" <span>></span>
  <span><</span>input type="text" name="password_confirmation" <span>></span>
  <span><</span>input type="submit" value="Atualizar Senha"<span>></span>
<span><</span>/form<span>></span>
      </pre>
      <p>O formulário para atualizar a senha a senha deve usar action {{account_url}}</p>
      <div></div><br>
      <pre>
{% if flash.client.error %}
      </pre>

      <p>Mensagem de sucesso e de erro para o form de recuperar senha.</p>
      <!-- // -->

      <h3 id="login.liquid">Login.liquid</h3>
      <p> Template usado tanto para novos cadastros quanto para logins de clientes já cadastrados. Desta página parte também o login via Facebook, que permite que clientes participem de promoções específicas.
      <p><span class="summary"><code><a href="#formulário-de-cadastro" class="laranja">&raquo; ver implementação no .liquid</a></code></span></p>
      <!-- // -->

      <h4 id="formulário-de-Cadastro">Formulário de Cadastro</h4>
      <pre>
<span><</span>form action="{{ login_url }}" method="post"<span>></span>
  <span><</span>input id="new_client_terms" name="new_client[terms]" type="hidden" value="on"<span>></span>
  <span><</span>input type="text" name="email" <span>></span>
  <span><</span>input type="text" name="password" <span>></span>
  <span><</span>input type="text" name="password_confirmation" <span>></span>
  <span><</span>input type="checkbox" name="terms"<span>></span>
<span><</span>/form<span>></span>
      </pre>
      <p>O form de cadastro deve usar a action {{ login_url }}</p>
      <div></div><br>
      <pre>
{% if flash.signup.error %}
  {{ flash.signup.error }}
{% endif %}}
      </pre>
      <p>Quando existir algum erro no formulário de cadastro &raquo;</p>
      <!-- // -->
      <h4 id="formulário-de-Login">Formulário de Login</h4>
      <pre>
<span><</span>form action="{{ login_url }}" method="post"<span>></span>
  <span><</span>input type="hidden" name="_method" value="put"<span>></span>
  <span><</span>input type="text" name="password" <span>></span>
  <span><</span>input type="text" name="password_confirmation" <span>></span>
 <span><</span>/form<span>></span>
      </pre>
      <p>O form de login deve usar a action {{ login_url }}</p>
      <div></div><br>
      <pre>
{% if flash.login.error %}
  {{ flash.login.error }}
{% endif %}
      </pre>
      <p>Quando existir algum erro no formulário de login &raquo;</p>
      <!-- // -->
      <h4 id="formulário-de-Recuperar Senha">Formulário de Recuperar Senha</h4>

      <pre>
<span><</span>form action="{{recover_password_url}}" method="post""<span>></span>
  <span><</span>input type="text" name="email" <span>></span>
  <span><</span>input type="submit" value="RECUPERAR SENHA"<span>></span>
<span><</span>/form<span>></span>
      </pre>

      <p>O formulário de recuperar a senha deve usar action {{recover_password_url}}</p>
      <p>O usuário vai receber um email com a nova senha</p>

      <pre>
{{ flash.recover_password.ok }}
{{ flash.recover_password.error }}
      </pre>

      <p>Mensagem de sucesso e de erro para o form de recuperar senha.</p>

<!-- // -->
<h3 id="search.liquid">Search.liquid</h3>
<pre>
<span><</span>form action="{{ search_url }}" method="post""<span>></span>
  <span><</span>input type="search" name="q" <span>></span>
  <span><</span>input type="submit" value="Pesquisar"<span>></span>
<span><</span>/form<span>></span>
</pre>
<p>Template para a exibição dos resultados de uma busca.</p>
<p>Para realizar uma busca use um formulário com action="{{ search_url }}", <b>método GET</b> e com o campo type="search" name="q".</p>
<p>**Url final: <i>https://www.nome_da_loja/busca?q=termo.</i></p>
<div></div><br>
<pre>
{% for product in products %}
  {{ product.image_url | resize: '234x' }}
    {{ product.url }}
    {{ product.tag_names }}
    {{ product.reference }}
    {{ product.description }}
    {% if product .available %}
      {% if product.on_sale %}
        // preço
        {{product.price | money_format}}
        // preço com desconto
        {{ product | apply_discount | money_format }}
      {% else %}
        preço: {{ product.price | money_format }}
      {% endif %}
    {% else %}
     Produto Esgotado
    {% endif %}
{% endfor
</pre>
<p>O resultado da busca é armazenado na tag <b>{{ products }}</b>, use a tag {% for %} para percorrer e exibir as informações de produto deste array.</p>
<p>**Mostra o termo da busca: {{ params.q | strip_html }}</p>
<p>**Não é necessário informar <b>parâmetros</b> no {% for product in products %}.</p>
<div></div><br>

<h4 id="busca-padrao">Busca padrão</h4>
<pre>
// lojas que não usam o elasticsearch
{% if products.size > 0  %}
 Encontramos {{ products.size }} resultados(s) por: {{ params.q | strip_html }}.
{% endif %}
</pre>
<p>**Verifica se a busca retornou algum resultado: {{ products.size }}.</p>

<h4 id="busca-com-elasticsearch">Busca com Elasticsearch</h4>
<pre>
{% if pagination.total_hits > 0  %}
 Encontramos {{ pagination.total_hits }} resultados(s) por: {{ params.q | strip_html }}.
{% endif %}
</pre>
<p>**Verifica se a busca retornou algum resultado: {{ pagination.total_hits }}.</p>

<h5 id="paginacao-na-busca-elasticsearch">Páginação na busca com Elasticsearch</h5>
<pre>
{% for product in products %}
  // include com o arquivo com a listagem de produtos
  {% include "list_product" %}
{% endfor %}

{% if pagination.total_pages > 1 %}
<span><</span>nav class="pagination"<span>></span>
<span><</span>span class="pagination"<span>></span>
    Página {{ pagination.current_page }} de {{ pagination.total_pages }}
    {% if pagination.prev_page %}
        <span><</span>a href="{{ pagination.prev_url }}" class="previous"<span>></span>←<span><</span>/a<span>></span>
    {% endif %}
    {% for page in pagination.pages %}
      <span><</span>li class="{% if current_url == page.url %} active {% endif %}"><span><</span>a href="{{ page.url }}">{{ page.number }} {% if current_url == page.url %}{% endif %}</a></li>
    {% endfor %}
    {% if pagination.next_page %}
        <span><</span>a href="{{ pagination.next_url }}" class="next"<span>></span>→<span><</span>/a<span>></span>
    {% endif %}
<span><</span>/span<span>></span>
<span><</span>/nav<span>></span>
{% endif %}

</pre>
 <p>Páginação disponível para as lojas com Elasticsearch ativado.</p>
 <p>*** O código da paginação não precisa ser incluído em algum dos loop das interações de {% for product in products %}.</p>
 <p>*** Quantidade máxima de 20 produtos por página.</p>




      <h3 id="page.liquid">Page.liquid</h3>
      <p>Vnda permite que sejam criadas e alteradas páginas pelo Painel Administrativo. Isso é feito pelo próprio gestor da loja pois dispensa conhecimentos de programação. Neste template serão exibidas as páginas, de acordo com a URL digitada. </p>
      <!-- // -->

      <h2 id="tags-personalizadas-da-vnda">Tags personalizadas da Vnda</h2>
      <p> A plataforma atende com um conjunto de tags responsável por tornar a aplicação dinâmica.</p>
      <!-- // -->
      <h3 id="orders">{% orders %}</h3>
      <pre>
{% orders client_id:client.id %}
  {{ order.code }}
  {{ order.email }}
  {{ order.received_at | date: '%m/%d/%Y') }}
  {{ order | order_status }}
  {{ order.total | money_format }}
{% endorders  %}
      </pre>
      <p>Listar pedidos é utilizado no template account.liquid. </p>
      <p>* No template account.liquid é possível enviar e exibir dados do usuário:</p>
      <div></div><br>
      <pre>
<span><</span>form action="{{acount_url}}" method="post"<span>></span>
  <span><</span>input type="text" name="email" /<span>></span>
  <span><</span>input type="password" name="password" /<span>></span>
  <span><</span>input type="password" name="password_confirmation" /<span>></span>
<span><</span>/form>
      </pre>
      <p>* editar senha</p>
      <div></div><br>
      <pre>
{{ client.first_name }}
{{ client.last_name}}
{{ client.email }
      </pre>
      <p>* exibir dados do usuário</p>
      <!-- -->

      <h3 id="cartitems">{% cartitems %}</h3>
      <pre>
{% cartitems  %}
{{  item.image_url | resize: '234x' }}
  {{ item.product_name }}
  {{ item.id }}
  {{ item.quantity }}
  {{item.subtotal | money_format }}
  {{ item.variant_name | money_format }}
{% endcartitems %}
      </pre>
      <p>* Loop para exibir os itens do Carrinho</p>
      <!-- -->

      <h3 id="products">{% products %}</h3>
      <pre>
{% products tag:tag.name parent_tag:parent_tag.name page:params.page per_page:25 %}
  {{ product.image_url | resize: '234x' }}
  {{ product.url }}
  {{ product.reference }}
  {{ product.description }}
  {% if product.available %}
    {% if product.on_sale %}
     // preço
     {{product.price | money_format}}
     // preço com desconto
     {{ product | apply_discount | money_format }}
     // parcelas
     (ou em até {{ product | apply_discount | installment_number }}x de: {{  product | apply_discount | installment_number | money_format }})
    {% else %}
      // preço
      preço: {{ product.price | money_format }}
      // parcelas
      (ou em até {{ product.price | installment_number }}x de: {{ product.price | installment_number | money_format }})
    {% endif %}
  {% else %}
   Produto Esgotado
  {% endif %}
{% endproducts %}

*listar produtos por id sendo assim possível buscar determinado produto ou uma lista deles
ex:
{% products ids:"1,2,3,4,5" %}
  {{product}}
{% endproducts %}
OU
{% products ids:"5" %}
  {{product}}
{% endproducts %}
      </pre>
      <p>
        Listar produtos<br />
        * loop para exibir os produto<br>
        * aceita o paramentro "limit".
      </p>
      <p>
        Ainda que não seja informado os parâmetros "limit" e "per_page" serão listados no <strong>máximo 25 produtos</strong> por página.
      </p>
      <p>
        Caso o parametro "limit" seja informado, os parâmetros "page" e "per_page" serão desconsiderados.
      </p>
      <p>
        A váriavel {{ params.page }} vem dos parâmetros da url ..produtos?page=2
      </p>
      <div></div><br>
      <pre>
{% products tag:tag.name filter:size:GG %}
{% products tag:tag.name filter:price:0-50 %}
{% products tag:tag.name filter:price:50-100 %}
{% products tag:tag.name filter:price:50-150 filter:size:GG %}
* esses filtros podem ser selecionados por um form e o valor pode ser capturado de acordo com o nome do input, podeno usar o nome que desejar.
{% products tag:tag.name filter:size:params.tamanho %} se o nome do input “tamanho”
{% products tag:tag.name filter:price:params.price %} se o nome do input “price”
* podem ser listadas todas as opções de tamanho disponíveis por tag
{% sizes tag:”nome-da-tag ”%}{{size}}{% endsizes %}
      </pre>
      <p>
        Filtrar produtos <br />
        * produtos podem ser filtrados pode e tamanho e faixa de preço.
      </p>
      <div></div><br>
      <pre>
{% products tag:tag.name sort:”price” %}
* da mesma forma que os filtros, a opção de ordenação do usuário pode ser enviada por um form e colocada na tag de produtos.
{% products tag:tag.name sort:params.order %}
 se o nome do field for “ordem”
      </pre>
      <p>Ordenar produtos<br /><p>
        <p>
        Por padrão, os produtos são ordenados de forma que os atualizados mais recentemente sejam exibidos primeiro. Caso o parâmetro "tag" esteja presente, os produtos serão ordenados pela importância dentro de cada tag.<br />
        </p>
        <p>
          Para usar outra ordenação, basta incluir o parãmetro sort na tag que lista os produtos.<br />
        </p>
        <p>
          Produtos podem ser ordenados por “price”, “price,desc”, “newest”, “newest,desc”<br />
        (newest é baseado na data de cadastro do produto), “name”, “name,desc”.</p>
        <div></div><br>
        <!-- // -->
        <h3 id="tags">{% tags %}</h3>
        <pre>
{% tags product_id:product.id type:"marca" limit:1 %}
  {{ tag.name}}
  {{ tag.type}}
  {{ tag.image_url }}
{% endtags %}
      </pre>
      <p>Listar tags<br />
        * aceita o parâmetro "limit, type, product_id.
      </p>
      <!-- // -->
      <h3 id="tag">{% tag %}</h3>
      <pre>
{% tag id:"categoria" %}
 {{ tag.name}}
 {{ tag.title }}
 {{ tag.description}}
 {{ tag.type}}
 {{ tag.image_url }}
{% endtag %}
      </pre>
      <p>Listar tag pelo "id"</p>
      <p>Assim que uma tag é cadastrado no admin se torna acessível desde que seja no .liquid informado o parêmentro id</p>
      <!-- // -->

<h3 id="product_count">{% product_count %} </h3>
<pre>
{% product_count tag:tag.name parent_tag:parent_tag.name %}
  {{ product_count }}
{% endproduct_count %}
</pre>
<p>Lista quantidade de produtos encontrados na tag</p>
 <!-- // -->

      <h3 id="menus">{% menus %}</h3>
      <pre>
{% menus position:"nome_da_posicao_do_menu_no_admin" %}
  {{ menu.url }}
  {{ menu.title }}
  {{ menu.subtitle }}
  {{ menu.items_count  }} // quantidade de sub-menus
  {{ menu.image_url }} // Tags com imagem
{% endmenus %}
      </pre>
      <p>Listar menus<br>
        * loop para exibir os itens de um menu </p>
      <p>Listar sub menus<br />
        * menu com submenus (html opcional)</p>
      <p>A quantidade de submenus é ilimitada.</p>
      <p>Dica: ara fazer um menu de marcas com logos, basca cadastrar um menu para esta finalidade, cadastrar o logo das marcas em suas respectivas tags e chamar no menu a variável: [ {{ menu.image_url }} ]  </p>
     <pre>
{% menus position:"nome_da_posicao_do_menu_no_admin" %}
  {% if forloop.first %}<span><</span>ul<span>></span>{% endif %}
    <span><</span>li<span>></span>
      {% menus parent_id:menu.id %}
        {% if forloop.first %}<</span>ul<span>></span>{% endif %}
        <span><</span>li<span>></span>{{ menu.url }} {{ menu.title }}<span><</span>/li<span>></span>
        {% if forloop.last %}<</span>/ul<span>></span>{% endif %}
      {% endmenus %}
    <span><</span>/li<span>></span>
  {% if forloop.last %}<span><</span>/ul<span>></span>{% endif %}
{% endmenus %}
      </pre>
      <div> </div><br>
      <!-- // -->
<pre>
// Exemplo de menu com 1 filho(subcategoria)
 {% menus position:"nome-da-posicao", children_depth:"1" %}
    {{ menu.title }}
    {{ menu.url }}
    ....
    {% for menu in menu.children %}
      {{ menu.title }}
      {{ menu.url }}
      ...
    {% endof %}

 {% endmenus%}
</pre>
<p>Já esta disponível uma nova versão de filtro de tag {% menus %}
que consome menos requisições para nossa api de menus.</p>
<p>Na chamada da tag foi adicionado o parâmentro "children_depth", nele é preciso informar a quantidade de filhos desse menu.</p>
<p>Agora usamos a tag {% for %} para percorrer as subcategorias do menu pai com auxílio de um váriavel local.</p>

      <h3 id="page">{% page %}</h3>
      <pre>{% page id:'bloco' %}</pre>
      <p>Listar conteúdo de uma page<br />
      <!-- // -->

      <h3 id="banners">{% banners %}</h3>
      <pre>
{% banners tag:"nome_da_posicao_no_admin" %}
  {{ banner.title }}
  {{ banner.subtitle }}
  {{ banner.description }}
  {{ banner.file_url | resize: '990x' }}
  {{ banner.url }}
  {% if banner.external %} target="_blank"{% endif %}
{% endbanners %}<br />
* aceita o parâmetro “limit:3”
      </pre>
      <p>Listar banners<br />
          * loop para exibir os banners </p>
      <!-- // -->

      <h3 id="images">{% images %}</h3>
      <pre>
{% images %}
  {{image}}
{% endimages %}
      </pre>
      <p>Listar imagens do produto<br />
        * deve estar dentro de um loop {% products %}</p>

      <h3 id="shippingmethods">{% shippingmethods %}</h3>
      <pre>
{% shippingmethods %}
  {% if forloop.first %}
    <span><</span>fieldset class="shipping-method"<span>></span>
    <span><</span>legend<span>></span>Selecione o método de entrega:<span><</span>/legend<span>></span>
  {% endif %}
  <span><</span>label for="delivery-{{ shipping_method.name }}"<span>></span>
  <span><</span>input type="radio" name="type" value="{{ shipping_method.value }}" <span>></span>
    {{ shipping_method.name }} {{ shipping_method.price | money_format }} {{ shipping_method.description }}
   <span><</span>/label<span>></span>
  <a href="#tag-do-valor-que-falta-para-frete-grátis" class="gray">//valor que falta para o frete grátis</a>
  {{  shipping_method.value_needed_to_discount }}
 {% if forloop.last %}
  <span><</span>/fieldset<span>></span>
 {% endif %}
{% endshippingmethods %}
      </pre>

      <h3 id="variants">{% variants %}</h3>
      <pre>
  * Exibir todas as variantes de um produto
  {% variants product_id:product.id %}
    {{ variant }}

  {% else %}
    nenhuma variante encontrada
  {% endvariants %}
      </pre>
      <p>Listar as variantes de um produto<br>
      * Um produto pode conter uma ou mais variantes cadastradas no admin,
      através do liquid é possível acessar todos os dados que contém uma variante
      como por exemplo preço, atributos, imagem, dispononibilidade...</p><br />
      <div></div><br>
      <pre>
{{ product | apply_discount, variant.price }}
      </pre>
      <p>
        <strong>Passando o preço da variante quando houver desconto.</strong>
      </p>
      <!-- // -->

      <h3 id="variant">{% variant %}</h3>
      <pre>
  {% variant sku:12001 %}
    {{ variant }}
  {% else %}
    variante não encontrada
  {% endvariant %}
                    </pre>
                    <p>* Exibir uma variante, pelo SKU</p>

                    <h3 id="videos">{% videos %}</h3>
                    <pre>
  {% videos %}
    {{video.embed_url}} // lista a url cadastrada no painel
    {{video.thumbnail_url}} // lista a imagem gerada pelo painel
  {% endvideos %}
                    </pre>
                    <p>Listar vídeos de um produto</p>

                    <h3 id="sizes">{% sizes %}</h3>
  <pre>
  {% sizes tag:’nome-da-tag’, parent_tag:’outra-tag’ %}
    {{ size.value }}
    {{ size.available }}
  {% endsizes %}
  </pre>
                    <p>Listar atributos tamanhos (deprecate)</p>

                    <h3 id="colors">{% colors %}</h3>
  <pre>
  {% colors tag:'nome-da-tag' %}
    {{ color.value }}
    {{ color.available }}
  {% endcolors %}
                  <p>Listar atributos cor (deprecate)</p>
  </pre>

<h3 id="opengraphfor">{% opengraphfor %}</h3>
<pre>
// Colar o código abaixo antes do fechamendo da tag <span><</span>head>
{% if template == "home" %}
  {% tag id:"capa" %}
    {% assign meta_title = tag.title %}
    {% assign meta_description = tag.description | strip_html %}
    {% assign meta_image = tag.image_url | strip_html %}
  {% endtag %}
  <span><</span>meta property="og:description" content="{{ meta_description }}">
  <span><</span>meta property="og:image" content="{{ meta_image }}" />
  <span><</span>meta property="og:url" content="{{ home_url }}" />
  <span><</span>meta name="description" content="{{ meta_description }}">
  <span><</span>meta name="image" content="{{ meta_image }}" />
  <span><</span>meta meta="url" content="{{ home_url }}" />
{% else %}
  {% case template %}
  {% when 'tag' %}{% opengraphfor tag %}{{ opengraph }}
  {% when 'product' %}{% opengraphfor product %}{{ opengraph }}
  {% when 'page' %}{% opengraphfor page %}{{ opengraph }}
  {% when 'search' %}{% contentfor title %}{{ params.q }}{% endcontentfor %}
  {% when 'finished' %}{% assign pretitle = 'Concluído' %}
  {% endcase %}
{% endif %}
<span><</span>title>
  {% if pretitle %}
    {{ pretitle }} | {{ store.name }}
  {% elsif title %}
    {{ title }} | {{ store.name }}
  {% else %}
    {{ meta_title }}
  {% endif %}
<span><</span>/title>
</pre>
<p>
  Configura as meta tags de SEO para facebook e google.<br />
  Carregue as informações informando o parâmetro {% opengraphfor nome_do_template %} e exiba as metatags usando o {{ opengraph }} antes do fechamento da tag <span><</span>head>.
</p>

<p>
  <b>**obs:templates disponíveis são:</b><br />
  para o template de tag {% opengraphfor tag %}<br />
  para o template de produto {% opengraphfor product %}<br />
  para o template de página institucional {% opengraphfor page %}
</p>
<p>Para exibir as metas da home, crie uma tag auxiliar como por exemplo "capa" e nela configure com os campos title, description e imagem para que possam ser carregadas apartir do código de exemplo ao lado.</p>

<!-- // -->

<h3 id="contentfor">{% contentfor %}</h3>
<pre>
// armazendo o conteúdo em lista_produto
{% contentfor lista_produto %}
  <span><</span>div> Item 1 <span><</span>/div>
{% endcontentfor %}
{% contentfor lista_produto %}
  <span><</span>div> Item 2 <span><</span>/div>
{% endcontentfor %}
{% contentfor lista_produto %}
  <span><</span>div> Item 3 <span><</span>/div>
{% endcontentfor %}

{{  lista_produto }}

retorno:
Item 1
Item 2
Item 3

// removendo o conteúdo em lista_produto
{% assign lista_produto = "" %}

// armazendo o conteúdo em lista_produto
{% contentfor lista_produto %}
  <span><</span>div> Item 5 <span><</span>/div>
{% endcontentfor %}

{% contentfor lista_produto %}
  <span><</span>div> Item 6 <span><</span>/div>
{% endcontentfor %}

{{  lista_produto }}

retorno:
Item 5
Item 6

{% assign lista_produto = "pense nele como uma váriavel" %}
{% contentfor lista_produto %}
  <span><</span>div> Item 10 <span><</span>/div>
{% endcontentfor %}

{{  lista_produto }}

retorno:
pense nele como uma váriavel
Item 6

</pre>
<p>O {% contentfor nome_da_variavel %} é usado para adicionar conteúdo dentro da variável  "nome_da_variavel" sem remover o conteúdo atual, contrário da tag {% capture %} que remove o conteúdo anterior.
<!-- // -->

<h3 id="aggregations">{% aggregations %}</h3>
<pre>
{% aggregations tag:tag.name parent_tag:parent_tag.name %}
{% endaggregations %}
</pre>
<p>
Filtros podem ser usados tanto no template de busca, quanto no de tag, com uma pequena diferença na sintaxe.<br>
Para usar os filtros em um mesmo arquivo e diferenciar o template em que estão sendo usados, use a seguinte sintaxe para identificar o template {{ template }}.<br>
Para ocultar os filtros, caso não queira usar em páginas que possuam pouco resultado e dos quais não seja interessante filtrar, verifique a quantidade de produtos resultante da busca ou da tag, com a seguinte sintaxe: Tag: {{ tag.products_count }} Busca: {{ products.size }}.<br>
</p>
<h4 id="filtro-preco"> - Filtro de Preço</h4>
<pre>
{
  "min"=>99.0,
  "max"=>999.0
}
</pre>
<p>O filtro de preço retorna apenas o menor e o maior valor e podem ser usados para criar um slice de preço, para filtrar produtos entre a faixa de preço desejado.</p>
<h4 id="filtro-tag"> - Filtro de Tags</h4>
<pre>
{
  "name"  =>"marca",
  "count" =>30,
  "values"=>[{
    "name"      =>"mosaico",
    "title"     =>"Mosaico",
    "count"     =>10,
    "selected"  =>false,
    "url"       =>"/feminino?typedtags__marca=mosaico"
  }]
}
</pre>
<p>O filtro de tags oferece o seguinte retorno:</p>
<h4 id="filtro-proprety"> - Filtro de Atributos</h4>
<pre>
{
  "name"  =>"Tamanho",
  "count" =>59,
  "values"=>[{
     "name"     =>"G",
     "count"    =>19,
     "selected" =>false,
     "url"      =>"/feminino?property__Tamanho=G"
  }]
}
</pre>
<p>O filtro de atributos oferece o seguinte retorno:</p>
<h4 id="filtro-nas-tags"> - Filtro nas tags</h4>
<pre>
{% aggregations tag:tag.name parent_tag:parent_tag.name %}
  {{ price }}
  {{ properties }}
  {{ typed_tags }}
{% endaggregations %}
</pre>
<p>
Para exibis filtros em uma tag, usamos a seguinte sintaxe:
</p>
<h4 id="filtro-na-busca"> - Filtro na busca</h4>
<pre>
{% aggregations q:params.q %}
  {{ price }}
  {{ properties }}
  {{ typed_tags }}
{% endaggregations %}
</pre>
<p>
Para exibis filtros na busca, usamos a seguinte sintaxe:
</p>

<h4 id="fintros-especificos"> - Filtros Específicos</h4>
<pre>
{% aggregations tag:tag.name parent_tag:parent_tag.name only_typed_tags:"marca" %}
  {{ typed_tags }}
{% endaggregations %}

{% aggregations q:params.q only_typed_tags:"marca" %}
  {{ typed_tags }}
{% endaggregations %}

{% aggregations tag:tag.name parent_tag:parent_tag.name only_properties:"Tamanho" %}
  {{ properties }}
{% endaggregations %}

{% aggregations q:params.q only_properties:"Tamanho" %}
  {{ properties }}
{% endaggregations %}
</pre>
<p>Podemos usar também filtros específicos, conforme o exemplo:</p>
<h4 id="fintros-unitarios"> - Filtros Unitários</h4>
<pre>
{% aggregations tag:tag.name parent_tag:parent_tag.name single_option_typed_tags:"marca" %}
  {{ typed_tags }}
{% endaggregations %}

{% aggregations q:params.q single_option_typed_tags:"marca" %}
  {{ typed_tags }}
{% endaggregations %}

{% aggregations tag:tag.name parent_tag:parent_tag.name single_option_properties:"Tamanho" %}
  {{ typed_tags }}
{% endaggregations %}

{% aggregations q:params.q single_option_properties:"Tamanho" %}
  {{ typed_tags }}
{% endaggregations %}
</pre>

<p>Por padrão, todos os filtros permitem múltiplas seleções, mas casos eja necessário, podemos fazer com que ele permita que apenas um item seja selecionado por vez.</p>
<p>Caso ainda tenha dúvidas de como aplicar os códigos no .liquid:<br><a href="https://gist.github.com/vagnerolliver/c3f83b030fa81b990625" target="_blank" class="laranja">acesse esse link.</a></p>
<!-- -->
<h3 id="search_options">{% search_options %}</h3>
<pre>
{% search_options %}
{{ search_option.label }}
{% endsearch_options %}
-------------------------
{
"name"=>"small_price",
"label"=>"Menor Preço",
"active"=>false,
"url"=>"/mobilidade-acessibilidade?order=price"
}
-------------------------
{% products tag:tag.name parent_tag:parent_tag.name page:params.page sort:params.order   %}
{% include "_commons/list_products" %}
{% endproducts %}
</pre>
<p>
Para obter um filtro de ordenação de produtos dentro de tags, usamos a seguinte sintaxe:<br>
OBS: O parâmetro de ordenamento deve ser passado para a tag, [ sort:params.order ] para que a ordem seja aplicada. <br>
Os parâmetros de ordenamento não se aplicam a busca, que mostra os produtos em ordem de relevância em relação ao que foi pesquisado.
</p>
<!-- // -->

<h3 id="include">{% include %}</h3>
<pre>
// vnda_stg_demo/template/_header.liquid
// vnda_stg_demo/template/_footer.liquid
// vnda_stg_demo/layout.liquid
// vnda_stg_demo/home.liquid
.....

Incluindo topo e rodape no arquivo layout.liquid
{% include "template/header" %}
{% include "template/footer" %}
</pre>
<p>Para reutilizar as parte de códigos que se repetem ao longo do desenvolvimento da loja usaremos a tag "{% include %}".<p>
<p>Obs: é obrigatório para qualquer arquivo que não seja de template, como por exemplo: home.liquid, tag.liquid, product.liquid etc.., usar o underscore antes do nome do arquivo: "_nomedoarquivo.liquid", caso contrário seu include não vai funcionar.</p>
<p>Ao passar o caminho do arquivo na tag include não o use undescore antes do nome.</p>
<p>A regra do undescore não se aplica a diretórios.</p>

<h2 id="recursos">Recursos</h3>
<p>Novos recursos são inseridos na Vnda a cada semana garantindo um software sempre atual.</p>
<!-- // -->

<h3 id="adicionar-produto-ajax-por-$post">Adicionar Produto Ajax com $.post()</h3>
<pre>
$.post( "/carrinho/adicionar",{ sku:'1004-4',quantity:'1' }, function( data ) {
  console.log(data)
},"json"
</pre>
<p>Para adicionar um produto no carrinho via ajax é necessário enviar para a url "/adicionar/carrinho" e os campos sku e quantidade.</p>
<p>Com jquery, recomendamos que use o $.post() para enviar os dados para url acima que o server esta configurado para retornar um objeto com os item(s) adicionado(s) no formato json como resposta, assim se torna fácil manipular o objeto com jquery.</p>

<h4 id="">Adicionado o(s) item(s) do carrinho no html (VIA JS)</h4>

<p>** incluir biblioteca jquery.js<br>** ter noções básicas de objetos<br></p>

<pre>
$.post( "/carrinho/adicionar",{ sku:'1004-4',quantity:'1' }, function( data ) {
  console.log(data)
},"json")

Resposta: [objeto json]
Object {id: 29, subtotal: 80, total: 80, shipping_method: null, shipping_price: 0…}
</pre>

<p>
Sempre for feito um $.post() para url "adicionar/carrinho" com os dados do sku e quantidade do produto,
a resposta do server esta configurado para retornar um objeto com os item(s) adicionado(s) no formato json.
<br><br>
**os dados desse objeto json são os mesmo encontrados no loop de {% cartitemns %}.
</p>

<div><br></div>

<pre>
$.post( "/carrinho/adicionar",{ sku:'1004-4',quantity:'1' }, function( data ) {
 $( cart.items ).each(function(index, item){
  console.log( item )
 });
},"json")

Object {id: 78, quantity: 1, price: 80, subtotal: 80, total: 80…}
Object {id: 79, quantity: 1, price: 80, subtotal: 80, total: 80…}
...
</pre>
<p>Você pode percorrer os indíces desse objeto usando each do jquery:  </p>

<div><br></div>

<pre>
function montaCarrinho( item ) {
 // deixe uma li de marcação no html
 // variavel cart_preview clona a li de marcação que será alimentada com o conteúdo do item
 var cart_preview = $( "ul.cart-items li" ).clone();
 // coloca para dentro da lista
 cart_preview.appendTo( "ul.cart-items" );
 // pesquisa dentro da li pela tag image e inclui o atributo src
 cart_preview.find( "img" ).attr("src",item.image_url)
 // pesquisa dentro da li  pela classe .name e inclui o nome
 cart_preview.find( ".name" ).text(item.product_name)
 // pesquisa dentro da li pela classe .price e inclui o preço
 cart_preview.find( ".price" ).html(item.price );
 .....
}

$.post( "/carrinho/adicionar",{ sku:'1004-4',quantity:'1' }, function( data ) {
 $( cart.items ).each(function(index, item){
  // vai montando o html com o(s) item(s)
  montaCarrinho(item)
 });
},"json")
</pre>

<p>
Existem várias formas de montar o dropdown e aba de carrinho via javascript,
o exemplo ao lado temos função que serve de modelo para carregar o html com uma lista de items a cada interação do for de items.
</p>
<p><a href="https://github.com/vagnerolliver/Adicionar-Produto-com--post----Aba-Dropdown-Carrinho/blob/master/script.js" class="laranja" target="_blank">publicado no github</a></p>

<!-- // -->

<h3 id="avaliacao-de-produto">Avaliação de Produto</h3>
<p>Com votações que podem ser de 1 a 5 pontos é possível enviar um formulário por método post os campos "rating"(pontuação) e "product_id"(id do produto) para url "/avaliacao".</p>
<div><br></div>
<pre>
// Situação atual
// média atual = 4
// votos = 6

// dados coletado na avaliação com pontuação 5
$.ajax({
  url: "/avaliacao",
  type: "POST",
  data: {rate: 5, product_id: id },
  success: function(response) {
    console.log("Média "+response.rating)
    console.log("Votos " +response.votes)
  }
});

Retorno:
"Média 4.2"
"Votos 7"
</pre>
<p>Com jquery, recomendamos que use o $.ajax() para enviar os dados para url acima que o server esta configurado para retornar um objeto json com a média da pontuação e a quantidade total de votos.</p>
<p>Existem vários plugins js pronto com  as aplicações de estrelinhas, <a class="laranja" href="http://speckyboy.com/2010/04/21/15-javascript-and-plugins-and-tutorials-for-adding-ratings/" target="_blank">dica</a>,<a class="laranja" href="https://www.google.com.br/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=bootstrap%20rating%20stars" target="_blank">com boostrap</a>.</p>
<p><a href="https://github.com/vagnerolliver/Avaliacao-do-Produto" class="laranja" target="_blank">Ver exemplo</a> usado na http://www.cadence.com.br</p>
<p>Os dados da pontuação também podem ser gerenciados via admin na edição do produto.</p>
<p><a href="/img/produto-reviews.png" data-featherlight="image"><img src="/img/produto-reviews.png"></a></p>
<p>Para zerar a pontuação do produto é necessário acessar a página de edição do produto no admin e selecionar a opção limpar</p>

<!-- // -->

<h3 id="avise-me-quando-chegar">API lista de Espera(Avise-me quando chegar)</h3>
<pre>
<span><</span>form action="/lista_de_espera" method="post">
<span><</span>p>Produto Indisponível<span><</span>/p>
<span><</span>strong>Avise-me quando chegar<span><</span>/strong>
<span><</span>input type="hidden" name="sku" value="{{ variant.sku }}">
<span><</span>input type="hidden" name="nomeproduto" value="{{ product.name }}">
<span><</span>input type="hidden" name="imagemvariante" value="{{ product.image_url }}">
<span><</span>input type="hidden" name="referencia" value="{{ product.referente }}">
<span><</span>input type="hidden" name="preco" value="{{ variant.price | money_format }}">
<span><</span>input type="email" name="email" value='usuario@email.com.br'>
<span><</span>input type="submit" value="Enviar">
<span><</span>/form>
</pre>
<p>Api de lista de espera é um recurso da plataforma que notificará o cliente sempre que um produto esgotado voltar ao estoque. O cadastro é feito através do formulário por método post para url "/lista_de_espera" com os campos obrigatórios: "email" e "sku"(da variante).</p>
<p>Campos opcionais: "referencia"(referencia do produto), preço, imagemvariante, nomeproduto.</p>
<p>Email do avise-me:</p>
<p><a href="/img/lista-de-espera.png" data-featherlight="image"><img src="/img/lista-de-espera.png"></a></p>

<!-- // -->

<h3 id="dns">DNS</h3>
<p>- Criar uma entrada (ou alterar uma já existente) do tipo A,
 apontando para o IP 52.21.216.0</p>
<p>- Criar uma entrada www (ou alterar uma já existente) do tipo CNAME, apontando para o domínio vnda.com.br.</p>

<h3 id="etiqueta-de-promocao">Etiqueta da Promoção</h3>
<pre>
* deve estar dentro de um loop {% products %}
{% if product.discount_id > 0 %}
{% get promotion from '/discount' [name: product.discount_id] %}
{% if promotion %}
<span><</span>img src="{{ promotion.seal_url }}" />
{% endif %}
{% endif %}
</pre>
<p>
  Listar a etiqueta da promoção que foi cadastrada no admin.
</p>

<!-- // -->

<h3 id="formulários-webforms">Formulários WebForms</h3>
<pre>
<span><</span>form action="/webform" method="post"<span> onsubmit="document.getElementsByName('reply_to')[0].value = document.getElementsByName('email')[0].value"></span>
<span><</span>input type="hidden" name="key" value="nome-da-loja-nome-do-form"<span>></span>
<span><</span>iinput type="hidden" name="reply_to" id="reply_to" value="">
<span><</span>input type="hidden" name="email" value=""<span>></span>
<span><</span>input type="submit"<span>></span>
<span><</span>/form<span>></span>
</pre>
<p><strong>Configuração admin:</strong></p>
<p>- Criando um novo form no admin: <a class="laranja" href="/img/novo-form.png" data-featherlight="image">confira aqui</a></p>
<p>- Informando o  email de destino e assunto: <a class="laranja" href="/img/edicao-do-form.png" data-featherlight="image">confira aqui</a></p>
<p>- Ao salvar será gerado um chave: <a class="laranja" href="/img/edicao-form-concluido.png" data-featherlight="image">confira aqui</a></p>
<p><strong>Configuração .liquid:</strong></p>
<p>- Form action= "/webform" </p>
<p>- Incluir o campo hidden com name="key" e com o valor da key do form da configuração anterior.</p>
<p>Incluir o campo hidden com name="reply_to", este campo deve pegar o valor do campo email antes do evento submit do formulário. Use um evento jquery onsubmit para pegar o valor do email antes do submit ou apenas informe o evento onsubmit direto na tag form
como o exemplo ao lado</p>

<!-- // -->

<h3 id="montar-carrinho-na-url">Montando um carrinho pela url</h3>
<pre>
// adicionando 2 itens na loja demo
// sku 1007-1 e 1009-4
// a quantidade do item 1007-1 = 10
// a quantidade do item 11009-4 = 5
// desconto de 50% no subtotal do pedido
// código do cupom de desconto "DESCONTO50"

<a href="https://demo.vnda.com.br/carrinho?itens=1007-1:10,1009-4:5&cupom=DESCONTO50" target="_blank">https://demo.vnda.com.br/carrinho?itens=1007-1:10,1009-4:5&cupom=DESCONTO50</a>
</pre>
<p>Quando um carrinho ainda não tiver nenhum dado de cliente ou para ser feito na mão, é possível incluir na URL os parâmetros "sku","quantidade" e opicional "cupom".</p>
<p>Basicamente, deve entrar no final da URL SKU:QNT+SKU:QNT...</p>
<p>Esse link leva direto para o carrinho montado e pode ter algum CUPOM ASSOCIADO</p>
<p>Url /carrinho?itens=SKU:quantidade,SKU:quantidade&cupom=CUPOM</p>
<h3 id="descrição-do-produto-com-múltiplas-seções">Descrição do produto com múltiplas seções</h3>
<pre>
{% if product.description %}
  {% assign descParts = product.description | split:"linhadecorte" %}
  {% for desc in descParts %}
    {% if forloop.index == 1 %}{% assign desc1 = desc %}{% endif %}
    {% if forloop.index == 2 %}{% assign desc2 = desc %}{% endif %}
    {% if forloop.index == 3 %}{% assign desc3 = desc %}{% endif %}
  {% endfor %}
{% endif %}
...
{{ desc1 }}
...
{{ desc2 }}
...
{{ desc3 }}
</pre>
<p>Para determinar o o local onde a descrição será dividida, deve-se colocar o texto “linhadecorte” na descrição do produto</p>


      <h3 id="notificações-de-e-mails">Notificações de e-mails</h3>
      <p>A plataforma possui integração com <a href="https://madmimi.com/" target="_blank" class="laranja">Madmimi</a>, ferramenta que gerencia as campanhas de e-mails dos nossos clientes.</p>
      <p>Atualmente disponibilizamos as seguintes notificações: </p>
      <pre>
exemplo-pedido-recebido
exemplo-pedido-recebido-deposito
exemplo-pedido-recebido-boleto
exemplo-pedido-entregue
exemplo-pedido-enviado
exemplo-pedido-confirmado
exemplo-pedido-cancelado
exemplo-novo-cliente
exemplo-senha-cliente
      </pre>
      <p>O nome das campanhas &raquo;</p>
   <br ><br ><br ><br ><br ><br ><br ><br ><br ><br ><br ><br >
   <pre>
"nome",
"sobrenome",
"pedido",
"paginadopedido",
"experienciadocliente",
"valordodesconto",
"valordoenvio",
"valordopedido",
"formadepagamento",
"formadeenvio",
"itensdopedido",
"enderecoentrega",
"bairroentrega",
"cidadeentrega",
"estadoentrega",
"enderecocobranca",
"bairrocobranca",
"cidadecobranca",
"estadocobranca",
"linkdoboleto"
      </pre>
      <p>Os campos que podem ser enviados nos emails de noviticação &raquo;</p>
      <!-- // -->

      <h3 id="percentual-desconto-boleto">Percentual de desconto no Boleto</h3>
      <pre>
// Preço total do carrinho R$ 100,00

{{ cart.total_for_slip | money_format }}
Retorno "R$ 70,00"

{{ store.settings.slip_discount }}
Retorno "30"
      </pre>
      <p>Em configurações da loja, no item Boleto, informe o % de desconto que o pagamento por boleto terá.<a class="laranja" href="/img/percentual-desconto.png" data-featherlight="image">confira aqui</a></p>
      <p>A tag {{ cart.total_for_slip }} exibe o total do carrinho com o desconto aplicado.</p>
      <p>É possível pegar o % de desconto na store pelo settings da loja com {{ store.settings.slip_discount }}.</p>

<!-- // -->

<h3 id="urls-destino-apos-login">Url's Destino após Login</h3>
<pre>
Os valores aceitos são:

=> Index
<</span>input type="hidden" name="redirect_to" value="home" />

=> /conta
<</span>input type="hidden" name="redirect_to" value="account" />

=> /produto/slug-id
<</span>input type="hidden" name="redirect_to" value="product:{{ product.id }}" />

=> /nomedatag
<</span>input type="hidden" name="redirect_to" value="tag:{{ tag.name }}" />

=> //p/keydapages
<</span>input type="hidden" name="redirect_to" value="page:{{ page.id }}" />
</pre>
<p>Por default a plataforma redireciona formulários de login ou cadastro para Home da loja. Visando melhorar a usabilidade é possível configurar para qual url você deseja redirecionar seu cliente, basta incluir um campo hidden com name "rediret_to" em ambos formulários e passar um dos valores suportados.</p>
<p>Esse tipo de ação é mais recorrente nos formulários dentro de modals, visto que pode ser acessados em qualquer página, por exemplo na página de detalhe do produto.</p>

<!-- // -->

      <h3 id="wishlist(lista-de-desejos)">Wishlist(lista de desejos)</h3>
      <pre>
<span><</span>form action="{{ wishlist_url }}" method="POST"<span>></span>
  <span><</span>input type="hidden" name="_method" value="DELETE"/<span>></span>
  <span><</span>input type="hidden" name="client_id" value="{{client.id}}"/<span>></span>
  <span><</span>input type="hidden" name="product_id" value="{{wish.product_id}}"/<span>></span>
  <span><</span>button type="submit"<span>></span>Remover<span><</span>/button<span>></span>
<span><</span>/form<span>></span>
      </pre>
      <p>* Deletar produto da lista (também pode ser por JS)</p>
      <div></div><br>
      <pre>
{% wishlist client_id:client.id %}
    {{wish}}
{% else %}
    nada
{% endwishlist %}

* para a listagem dos produtos utilize a tag {% products %} <a href="#products">&raquo; ver código</a>
    </pre>
    <p>* Mostrar lista do cliente</p>
    <div></div><br>
    <pre>
{% wishlist client_id:client.id product_id:2 %}
    {{wish}}
{% endwishlist %}}
      </pre>
      <p>* Consultar se produto está na lista</p>
      <div></div><br>

      <pre>
<span><</span>form action="{{ wishlist_url }}" method="POST"<span>></span>
  <span><</span>input type="text" name="client_id" value="{{client.id}}"/<span>></span>
  <span><</span>input type="text" name="product_id"/<span>></span>
  <span><</span>button type="submit" value="Enviar"<span>></span>Enviar<span><</span>/button<span>></span>
<span><</span>/form<span>></span>
      </pre>
      <p>* Adicionar na lista com html</p>
      <div></div><br>
      <pre>
$.post(
  "/lista_de_desejos",
  { client_id: "15", product_id: "4" },
  function( data ) {
    console.log("success");;
  },
  "json"
)
      </pre>
      <p>* Adicionar via JS</p>
      <!-- -->

      <h2 id="dicas-setup/admin">Dicas Setup/Admin</h2>
      <p>Seção de dicas para integrar tanto no setup da loja ou para o admin.</p>

      <h3 id="validar-cpf">Biblioteca Jquery para validar cpf e cnpj</h3>
      <p><a href="https://gist.github.com/vagnerolliver/8e60807e5269162a58b7" target="_blank" class="laranja">Clique aqui</a> para ver os filtros disponíveis para usar no .liquid.</p>

      <h3 id="breadcrumbs">Breadcrumbs</h3>
      <p>Veja exemplos de como fazer o breadcrumb na tag e na página de produto.</p>
<pre>
{% comment %} Exemplo Tag {% endcomment %}
<span><</span>a href="{{ home_url }}"<span>></span>Home<span><</span>/a<span>></span>
{% if params.parent %}
  {% if parent_tag.title != "" %}
  <span><</span>a href="{{ home_url }}{{ params.parent }}"<span>></span>{{ parent_tag.title }}<span><</span>/a<span>></span>
  {% endif %}
{% endif %}
<span><</span>a href="{{ tag.image_url }}"<span>></span>{{ tag.title}}<span><</span>/a<span>></span>

-----------------------------------------
{% comment %} Exemplo Produto {% endcomment %}
<span><</span>a href="{{ home_url }}"<span>></span>Home<span><</span>/a<span>></span>
{% tags product_id:product.id %}
  {% if tag.type != "capa"%}
    <span><</span>a href="{{ home_url }}{{ tag.name }}"<span>></span>{{ tag.title }}<span><</span>/a<span>></span>
  {% break %}
  {% endif%}
{% endtags %}
<span><</span>a href="{{ product.url }}" title="{{ product.name }}"<span>></span>{{ product.name }}<span><</span>/a<span>></span>

</pre>

      <h3 id="listar-percentual-desconto-no-produto-em-promoção">Listar Percentual de Desconto no produto em promoção</h3> <!-- // -->
      <pre>
//variável que armazena o preço original
{% assign valor_produto = product.price %}

//variável que armazena o preço c/ desconto
{% assign valor_com_desconto = product | apply_discount %}

//variável que armazena o percentual de desconto
{% assign desconto =  valor_produto | minus:valor_com_desconto | times:100 | divided_by:valor_produto | remove: '.0' %}

// lista o percentual de desconto
{{ desconto }}
      </pre>
      <p>Para listar o % (percentual) de desconto de um produto em promoção é necessário é criar variáveis e auxiliar na criação dos filtros das operações.</p>
      <!-- // -->

<h3 id="calcular-frete-no-detalhe-do-produto">Calcular frete no detalhe do produto</h3>
<pre>
$.ajax({
  url: "/frete_produto",
  cache: false,
  type: "POST",
  dataType: "json",
  data: {
    product_id:99999, // informe um id válido de produto
    zip: "93265340"
  },
  success: function(json) {
    //console.log(json.error);
    if(json.error == "Invalid zip or product_id"){
        alert("Cep nao cadastrado no correios")
    } else {
        var methods = $.parseJSON(json.methods);
        console.log(methods)
    }
  }
});

Retorno:
[Object, Object, Object]
</pre>
<p>Para calcular o frente de um produto envie um formulário de dados via ajax passando os parâmetros product_id(id do produto ) e zip(cep) para url "/frete_produto". Api de frete esta configurada para retornar um objeto no formato json com as informações do local do cep digitado e dados de entrega: nome do método(sedex,pac etc..), prazo e preço.</p>
<p>Rode o código do preview ao lado no console do navegador e em umas das página da sua loja, altere apenas o campo product_id com uma valor válido.</p>

<p>Código publicado no <a href="https://github.com/vagnerolliver/calculando-frete-do-produto" class="laranja" target="_blank">github</a>, o mesmo usado no lojadamoto.com.br </p>

<!-- -->

<h3 id="como-listar-parcelas">Como Listar Parcelas</h3>
<p>Para listar parcelas, podemos usar um dos seguintes exemplos de código:</p>
<pre>
// produto com desconto
{{ product | apply_discount | installment_number }}x de {{  product | apply_discount | installments | money_format }}
ou
{% assign preco =  product | apply_discount %}
{{ preco | installment_number }}x de {{ preco | money_format }}

// produto sem desconto
{{ product.price | installment_number }}x de {{  product.price | installments | money_format }}
ou
{% assign preco =  product.price %}
{{ preco | installment_number }}x de {{ preco | money_format }}
</pre>
<!-- // -->

<h3 id="como-listar-juros-das-parcelas">Como Listar Juros das Parcelas</h3>
<pre>
// Juros das parcelas do produto
{% product_installments product_id:product.id %}
  OU {{ max_without_interest.number }}X DE
  {{ max_without_interest.price | money_format }}
  {% if max_with_interest.number %}
    OU {{ max_with_interest.number }}X DE
    {{ max_with_interest.price | money_format }} com {{ max_with_interest.interest_rate }}% de juros a.m.
  {% endif %}
{% endproduct_installments %}
</pre>
<p>Listando os juros das parcelas do produto.</p>
<div></div><br>
<pre>
// Juros das parcela nas variantes
<span class="err">{% product_installments variant_sku:variant.sku %}</span>
  OU {{ max_without_interest.number }}X DE
  {{ max_without_interest.price | money_format }}
  {% if max_with_interest.number %}
    OU {{ max_with_interest.number }}X DE
    {{ max_with_interest.price | money_format }} com {{ max_with_interest.interest_rate }}% de juros a.m.
  {% endif %}
{% endproduct_installments %}
</pre>
<p>Listando os juros das parcelas da variantes </p>
<p>O que muda nesse caso são os parâmetros, de product_id para variant_sku: <span class="laranja">{% product_installments variant_sku:variant.sku %}</span></p>
<p>Não esquece que esse deve estar dentro do loop de {% variants %}</p>
<!-- // -->

  <h3 id="como-relacionar-produtos">Como relacionar produtos</h3>
      <pre>
{% assign product_id = product.id %}
{% tags product_id:product.id type:"relacionado" limit:1 %}
  {% products tag:tag.name %}
    {% unless product_id == product.id %}
      {{product}}
    {% endunless %}
  {% endproducts %}
{% endtags %}
      </pre>
      <p>
        É necessário criar uma tag e colocar um tipo para ela (pois vamos buscar a tag por tipo na sequencia. no exemplo usamos o tipo "relacionado")
        Então usamos o código abaixo na tela de produtos. Ele percorre as tags do produto em busca de uma que tenha o tipo "relacionado". Caso encontre, serão listados os produtos que também tem essa tag, ou seja, que estão relacionados entre si.
      </p>

<!--
<h3 id="filtro-de-marcas">Filtro de Marcas</h3>
<pre>
{% brand_filter tag_id:tag.name %}
{% if brand.selected %}
<span><<span>a href="{{ brand.url }}"<span>></span>
<span><<span>input type="checkbox" checked onclick="window.location.href='{{ brand.url }}'"<span>></span>
{{ brand.title }}
<span><<span>/a<span>></span>
{% else %}
<span><<span>a href="{{ brand.url }}"<span>></span>
<span><</span>input type="checkbox" onclick="window.location.href='{{ brand.url }}'"<span>></span>
{{ brand.title }}
<span><<span>/a<span>></span>
{% endif %}
{% endbrand_filter %}

</pre>
<p>Para fazer um filtro de marcas, é preciso passar o parâmetro <strong> filter:brand:params.marca </strong> na chamada do loop de produtos.
<p>Para gerar o filtro de produtos, veja o código de exemplo:</p>
<br />
<br />-->

<h3 id="exibir-menu-para-tag">Como exibir o menu para uma determinda tag</h3>
<pre>
para url http://www.loja.com.br/masculino/luvas -->
{% if tag.name == "masculino" or params.parent == "masculino" %}
//carrega uma posição de menu %
{% menus position:"masculino" %}
...
{% endmenus %}
{% endif %}
<a href="#mapeamento-da-tag-params">entenda a tag {{ params }}</a>
      </pre>
      <p>Para chamar um menu em uma determinada categoria na página de tag será necessário veficar o nome da tag, entretanto, se necessário incluir o menu em todas categorias filhas use params.parent </p>
      <p>Note que no ex ao lado que é nessário chamar a posição de menu masculino em 2 cenários, um para quando a tag for masculino ou para quando a tag for "luvas". Leve em consideração que "luvas" é filha de "masculino".</p>
<!-- // -->

<h3 id="como-incluir-favicon">Como incluir Favicon?</h3>
<pre>
Chamando um favicon salvo na raiz da pasta "/public"
{{ "favicon.ico" | favicon_tag }}
// Retorno
<span><</span>link href="nomedaloja/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon"/>


Chamando um favicon salvo na raiz da pasta "/public/images"
// Retorno
{{ "images/favicon.ico" | favicon_tag }}
<span><</span>link href="nomedaloja/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon"/>
</pre>
<p>1. Para incluir uma favicon por uma tag de .liquid, é preciso informar o filtro "favicon_tag" {{ "favicon.ico" | <b>favicon_tag</b> }}.</p>
<p></p><br />
<p>2. Para incluir direto por html, informe o caminho relativo da pasta que esta salvo o favicon.ico.</p>
<p>2.1 Caminho relativo da pasta "/public"<br />
<span><</span>link href="/favicon" rel="shortcut icon" /></p>
<p>2.2 Caminho relativo na raiz da pasta "/images"<br />
<span><</span>link href="/images/favicon.ico" rel="shortcut icon" />
</p>
<!-- // -->

<h3 id="precos-na-tag">Como listar menor e maior preço</h3>
<pre>
{% variants product_id: product.id %}
  {% if product.on_sale %}
    {% assign price = product | apply_discount, variant.price %}
  {% else %}
    {% assign price = variant.price %}
  {% endif %}

  {% if forloop.first %}
    {% assign min_price = price %}
    {% assign max_price = price %}
  {% else %}
    {% if price < min_price %}{% assign min_price = price %}{% endif %}
    {% if price > max_price %}{% assign max_price = price %}{% endif %}
  {% endif %}
{% endvariants %}
min: {{ min_price | money_format }}
max: {{ max_price | money_format }}
</pre>
<p>Na tela de tag, podemos exibir o preço menor e maior entre as variantes do produto.</p>
      <!-- // -->
      <h3 id="exibir-images-estáticas">Exibir imagens estáticas</h3>
      <p>* devem estar no diretório /public/images</p>
      <pre>
  {{ “nome_do_arquivo.ext” | image_tag: “Texto alternativo” }}
  <span><</span>img src="{{ “nome_do_arquivo.ext” | image_url }}" alt=“Texto alternativo”/<span>></span>
      </pre>

      <h3 id="incluir-css-js">Incluindo css e js pelo .liquid</h3>
      <pre>
// para o css
{{ "style.css" | stylesheet_tag }}

// para js
{{ "function.js" | javascript_tag }}
      </pre>
      <p>Para chamar os arquivos css e js salvos nas pastas "/stylesheets" e "/javascripts/" use os filtros "stylesheet_tag" e "javascript_tag".</p>
<!-- // -->

     <h3 id="mapeamento-da-tag-params">Mapeamento da tag params</h3>
      <pre>
<span><</span>pre>{{ params }}<</span>/pre>

// Retorno:

// na página da busca
http://www.bodystore.com.br/corpo?page=3
 <span><</span>pre>{"q"=>"produto x"}<span><</span>/pre>

// na página da produto
par url http://www.loja.com.br/produto/produto-191
<span><</span>pre>{"slug"=>"produto", "id"=>"191"}<span><</span>/pre>

// na página da tag
par url http://www.loja.com.br/masculino/bermudas
<span><</span>pre>{"parent"=>"masculino", "tag"=>"bermudas"}<span><</span>/pre>

// na  páginação
par url http://www.loja.com.br/masculino/bermudas
<span><</span>pre>{"page"=>"3", "parent"=>"doces", "tag"=>"bolos"}<span><</span>/pre>
      </pre>
      <p>É possível fazer o mapeamento dos parâmetros de cada template pela tag {{ params }}.</p>
      <p>Para cada template é feito um mapeamento da url de acordo com o parâmetro disponível.</p>
      <p>Veja um caso de uso para chamar uma posição de menu ou para tag "masculino" ou "feminino" <a href="#exibir-menu-para-tag" class="laranja">mais detalhes aqui.</a></p>

      <!-- // -->
      <h3 id="metricas-google-analytics">Métricas Google Analytics</h3>

      <h4 id="mensuracao-de-banners">Mensuração de banners</h4>
      <pre>
{% banners position: "capa-grande" %}
<span><</span>li>
<span><</span>a class="link-img" href="{{ banner.url }}">
<span><</span>img src="{{ banner.file_url }}" alt="{{ banner.title }}" data-banner-title="{{ banner.title }}" data-content-type="banner" data-banner-position="capa-grande">
<span><</span>/a>
<span><</span>div class="info">
<span><</span>h3>{{ banner.subtitle }}<span><</span>/h3>
{{ banner.description }}
<span><</span>/div>
<span><</span>/li>
{% endbanners %}
      </pre>
      <p>É possível mensurar os cliques dos banners no Google Anatylics através do .liquid informando os atributos
        data-banner-title, data-content-type e data-banner-position dentro do loop {% banners %}.
      </p>
      <p>Os atributos data-banner-title e data-content-type deve ser os mesmo
        cadastrados no admin nos campos Title e Position;
       </p>
       <!-- // -->
      <h3 id="resumo-do-pedido">Resumo do Pedido</h3>
      <p>Segue um modelo de resumo do carrinho.</p>
      <pre>
<span><</span>table class="table">
    <span><</span>tbody>
        <span><</span>tr>
            <span><</span>td>Subtotal</td>
            <span><</span>td>{{ cart.subtotal | money_format }}</td>
        <span><</span>/tr>
        {% if cart.shipping_price > 0 %}
        <span><</span>tr>
          <span><</span>td>Frete</td>
          <span><</span>td>{{ cart.shipping_price | money_format }}</td>
        <span><</span>/tr>
        {%  endif %}
        {% if cart.discount_price > 0 %}
        <span><</span>tr>
          <span><</span>td>Desconto</td>
          <span><</span>td>{{ cart.discount_price | money_format }}</td>
        <span><</span>/tr>
        {% endif %}
        <span><</span>tr>
            <span><</span>td>Total de pedidos</td>
            <span><</span>td>{{ cart.total | money_format }}</td>
         <span><</span>/tr>
    <span><</span>/tbody>
<span><</span>/table>
      </pre>
      <!-- // -->

      <h3 id="outras-tags-do-liquid">Outras tags do .liquid</h3>
      <p>Outras tags que pode ser chamados no .liquid</p>
      <pre>
{{ home_url }}     -  retorna a url da home
{{ current_url  }} -  retorna a url atual
{{ store_name }}   -  retorna o nome da loja/admin
      </pre>
      <!-- // -->
      <h3 id="verificar-usuário-logado">Verificar usuário logado</h3>
      <pre>
  {% if logged_in %}
    <span><<span>a href="{{ account_url }}" title="minha conta">minha conta<span><<span>/a<span>><span>
    <span><<span>a href="{{ logout_url }}" title="sair">sair<span><<span>/a<span>><span>
  {% else %}
    <span><<span>a href="{{ login_url }}" title="">minha conta<span><<span>/a<span>><span>
  {% endif %}
      </pre>
      <p>A váriavel "logged_in" retorna valor verdadeiro se o usuário estive logado.</p>
      <p>Use a váriável "logout_url" para deslogar.</p>

       <!-- // -->
      <h3 id="tag-do-valor-que-falta-para-frete-grátis">Tag - Valor que falta para o Frete Grátis</h3>
      <pre>
{% shippingmethods %}
 ...
{{ shipping_method.value_needed_to_discount }}
...
{% endshippingmethods %}
     </pre>
      <p>
        É possível listar o valor que ainda falta pra ter desconto no frete
        associado a um tipo de entrega(dentro do loop <a href="#shippingmethods" class="laranja">{% shippingmethods %}</a>), pois o desconto é relativo ao método em questão.
      </p>


      <!-- // -->
      <h3 id="Tag-store-(configurações-admin)">Tag store (configurações admin)</h3>
      <pre>
// atribuindo endereço de forma dinâmica
{{ store.street_name }}..{{ store.street_number }}..
{{ store.neighborhood }}.
      </pre>
      <p>
        A tag { store } retorna um array com todas as propriedades da seção "admin/store/edit".
      </p>
      <p>
        Umas das vantagens do uso dessa tag é deixar o site com a logo e endereços gerenciavéis pelo cliente.
      </p>
      <p>
        Constantemente  um novo recurso é adicionado ao admin
        gerando um novo atributo para a tag "store", caso necessite chame a tag { store } em qualquer parte do arquivo .liquid e veja você mesmo os atributos suportados por esta.
      </p>

       <!-- // -->

      <h3 id="trocar-imagem-principal-por-variante-selecionada">Trocar imagem principal por variante selecionada</h3>

      <pre>
 passando o parâmetro "sku" na chamada da tag {% images %}
// execute loop de 'variants' antes de 'images'
{% variants product_id:product.id %}

// passe o parametro sku
{% images sku:variant.sku %}

// passe um data-sku para saber de qual variante pertence essa imagem
<span><</span>img src="{{ image.url }}" data-sku="{{ variant.sku }}">

{% endimages %}
{% endvariants %}

Para trocar a imagem principal façar uma função javascript que compare valor do input selecionado com o data-sku da imagem:

O valor do input das variantes sempre deve ser o sku.
      </pre>
      <p>Configurar produto no admin "admin > products > midias > images": ao clicar nas fotos do produto ficará disponível no modal com as variantes que podem ser selecionadas <a href="http://www.vnda.com.br/images/guides/screenshot-modal-midia.png"><img src="http://www.vnda.com.br/images/guides/screenshot-modal-midia.png"></a></p>

        <h3 id="novocarrinho">Novo Carrinho/ Novo Checkout</h3>
        <p>A partir da implantação do novo carrinho e do novo checkout, não são mais necessárias as edição dos arquivos cart.liquid e checkout.liqud.</p>
        <p>Toda a customização deve ser realizada em um arquivo chamado <strong>custom.css</strong>. Nele, basta sobrescrever os estilos padrões do carrinho e checkout pelas cores padrões do layout da loja.</p>
        <p>Exemplo de custom.css: <a href="https://github.com/georgeduartevnda/custom.css/blob/master/custom.css" target="_blank" class="laranja">custom.css</a> </p>
        <p> </p><br>
        <p> </p><br>
        <p> </p><br>
        <p> </p><br>


        <h3 id="pedido-finalizado">Pedido Finalizado por Boleto Moip e Cobre Grátis</h3>
        <h4>Moip</h4>
        <pre>
<span><</span>a target="_blank" href="#" id="print-button" style="display:none">IMPRIMIR<span><</span>/a>

<span><</span>script type="text/javascript">
  $(function(){
    $("#moip-script").on("success", function() {
       // função para retirar algum efeito de loader da página
    });
  });
<span><</span>/script>
        </pre>
        <p>A integração com o moip faz o mapeamento na página de pedido concluído para exibir e inserir o link do botao de imprimir. A validação do link é feita através da tag html <span><</span>a> de  atributo id definido como "print-button". Este processo pode levar alguns segundos por isso
        usamos um loader e um script padrão que será executado sempre que uma requisão for conclúida.</p>

        <h4>Cobre Grátis</h4>
        <p>Para o Cobre Grátis o link é carregado no .liquid pela tag {{ order.slip_url }}</p>

        <p></p><br>
        <pre>
 {% if store.settings.slip_gateway == 'cobre_gratis' %}
 {% else %}
   // moip
 {% endif %}
        </pre>
        <p>obs: validar no front qual a integração que a loja usa.</p>
        <p>Exemplo de página de pedido finalizado <a href="https://github.com/vagnerolliver/Pedido-Finalizado" class="laranja" target="_blank">aqui</a></p>

        <h3 id="produto-com-2-atributos-liquid">Produtos c/ 2 Atributos - via Liquid</h3>

        <p>
          Partindo da premissa em que os atributos de um produtos são Cor(atributo_1) e Tamanho(atributo_2) respectivamente,
          e que ao abrir a página de produtos é listado apenas as cores e ao selecionar uma cor é listados as combinações de tamanho compátiveis com este atributo.
        </p>
        <p>Para isso criaremos um arquivo _variants.liquid com as seguintes manipulações de dados:
          <a href="https://github.com/georgeduartevnda/variants/blob/master/_variants_example.liquid" class="laranja" target="_blank">_variants_example.liquid</a>
        </p>

        <p> </p><br>
        <p> </p><br>

      <h3 id="produto-com-2-atributos">Produtos c/ 2 Atributos - via js</h3>

      <p>
        Partindo da premissa em que os atributos de um produtos são Cor(atributo_1) e Tamanho(atributo_2) respectivamente,
        e que ao abrir a página de produtos é listado apenas as cores e ao selecionar uma cor é listados as combinações de tamanho compátiveis com este atributo.
      </p>
      <p>Para isso criaremos um arquivo atributos.js com as seguintes funções e manipulações de dado.</p>
      <pre>
$(function(){

  // variável que recebe os objetos com as informaçoes de cada variante
  variants = vnda.variants.all()

  var cor = variants[0].properties.property1;
  var tamanho = variants[0].properties.property2;

  // verifica a quantidade de atributos do produto
  properties_count = quantity_of_properties()

  // produto com 2 atritubos
  if(properties_count >= 2) {
   $(".cores").html(
    '<span><</span>label>Cor:<span><</span>/label><span><</span>ul>'+create_color_radios(variants)+'<span><</span>/ul>'
        );
    // chamada da função que lista os tamanhos de uma cor selecionada
    enable_sizes_per_color()
    }
  } else if(properties_count == 1){   // produto com 1 atritubo

     // verifica qual html atributo deve ser criado no html
      if ( cor.value != null ) {
        $(".cor").html(
        '<span><</span>label>Cor:</label><span><</span>ul>'+create_absolute_color_radios(variants)+'<span><</span>/ul>'
        );
      } else {
        $('.tamanho').html(create_absolute_size_radios(variants))
      }
    } else {
      fill_sku_with_variant();
  }

  $( "form" ).on('submit',function(){
    if( quantity_of_properties() >= 2 ) {
      var atributo_1 =  $( ".cor input[type=radio]:checked").val();
      var atributo_2 = $( ".tamanho option:checked" ).val();
      variant = vnda.variants.find({Cor: atributo_1, Tamanho: atributo_2})[0]
      if(variant){
        sku = variant.sku
        $( "form" ).find( "#sku" ).val( sku );
      } else{
        return false
      }
    }
  })
}
      </pre>
      <p>Etapa 1 -  onde são chamadas as funções para criar as combinações, sku e enviar o formulário de compra:</p>
      <div></div><br>

      <pre>
// função que monta o html das cores
function create_color_radios(variants){
  colors = [];
  radios = ""
  for(variant in variants) {
    if( variants[variant].available == true ) {
      if(variants[variant].properties) {
        colors.push(variants[variant].properties.property1.value)
      }
    }
  }
  unique_colors = colors.filter(onlyUnique);
  for(color in unique_colors){
    desired_color = unique_colors[color]
    radios += '<span><</span>li style="background-color:'+desired_color+'">'
    radios += ' <span><</span>a href="#">'
    radios += '<span><</span>input type="radio" value="'+desired_color+'">'
    radios += ' </a>'
  }
  return radios
}

// se existir apenas o atributo cor
function create_absolute_color_radios(variants){
  radios = ""
  for(variant in variants) {
    if( variants[variant].available == false ) {
      var desired_color = variants[variant].properties.property1.value
      radios += '<span><</span>li style="background-color:'+desired_color+'">'
      // use como name "sku"
      radios += '<span><</span>input name="sku" type="radio>'
     }
  }
  return radios
}

function enable_sizes_per_color(){
  $('.cor input').click(function(){
    var elm = $( this );
    // add a variável apenas os tamanhos da cor selecionada
    variants = vnda.variants.find({Cor: elm.val()})
    // insere o html de tamanhos
    $('.tamanho').html(create_size_select(variants))
  });
}

// função que monta o html do tamanho
function create_size_select(variants){
  sizes = [];
  for(variant in variants) {
    if( variants[variant].available == true ) {
     if(variants[variant].properties) sizes.push(variants[variant].properties.property2.value);
    }
  }
  unique_sizes = sizes.filter(onlyUnique);
  select = '<span><</<span>label>Tamanho:<span><</<span>/label>'
  select += '<span><</<span>select>'
  for(size in unique_sizes){
    if ( variants[variant].available == true ) {
     desired_size = unique_sizes[size]
     select += '<span><</<span>option value="'+desired_size+'">'
     select += desired_size
     select += '<span><</<span>/option>'
   }
  }
  select += '<span><</<span>/select>'
  return select
}

// se existir apenas o atributo tamanho
function create_absolute_size_radios(variants){
  select = '<span><</span>label>Tamanho:</label>'
  // use como name "sku"
  select += '<span><</span>select name="sku" required>'
  for(variant in variants) {
    if( variants[variant].available == true ) {
      var desired_size = variants[variant].properties.property2.value
       select += '<span><</span>option id="size_'+desired_size+'"  data-name="tamamho" data-size="'+desired_size+'"  value="'+variants[variant].sku+'">'
       select += desired_size
      select += '<span><</span>/option>'
     }
    }
  select += '<span><</span>/select>'
  return select
}

function fill_sku_with_variant(){
  variant = vnda.variants.all()[0]
  $( "form" ).find("#sku").val(variant.sku)
}

function quantity_of_properties(){
  property_count = 0
  variants = vnda.variants.all()
  if(exists(variants[0].properties.property1)) property_count++
  if(exists(variants[0].properties.property2)) property_count++
  if(exists(variants[0].properties.property3)) property_count++
  return property_count
}

function exists(property){
  if(!property) return false;
  value = property.value
  if(value && property.defining && (value !== null || value !== ""))
    return true;
  else
    return false;
}

function onlyUnique(value, index, self) {
  return self.indexOf(value) === index;
}
      </pre>
      <p>Etapa 2 - Nessa etapa estão as funções:</p>

      <!-- -->

<h2 id="integracoes">Integrações</h2>
<p>Dicas de integrações com api's ou softwares de terceiros que agregram valor ou otimizam operações na loja.</p>
<!-- // -->

<h3 id="contentful">Contentful - script para o front da loja</h3>
<pre>
1)
function product_for_reference(reference, callback){

  var client = contentful.createClient({
    space: '{{ store.settings.contentful_space }}',
    accessToken: '{{ store.settings.contentful_token }}',
    secure: true,
    host: 'cdn.contentful.com'
  });

  client.contentTypes({name: "Product"}, function(err, content_type) {
    var product_id = content_type[0].sys.id;
    client.entries({content_type: product_id, "fields.reference[match]": reference}, function(err, entries) {

      if(typeof entries[0] === 'undefined'){
       callback(null);
      } else {
        callback(entries[0].fields);
      }
    });
  });
}
</pre>
<p>1- Função principal, responsável por filtrar as Entries com os parâmetros "reference" e "callback".product_for_reference(reference, callback)</p>
<p>Parâmetro reference = responsável por indentificar quais são as entries do produto</p>
<p>Parâmetro callback  = esse parâmetro é uma função que carrega todos os campos de uma entries quando houver. callback(entries[0].fields);</p>
<p><a href="/img/contentfull.png" data-featherlight="image"><img src="/img/contentfull.png"></a></p>
<p>2- Função para injetar no html o conteúdo de um entries. append_recipes(product)</p>
<p>Parâmetro product = é o callback da função product_for_reference(reference, callback), neste caso o callback deve carregar um objeto no formato json das entries.</p>
<p>3-Por último a chamada da função no .liquid através da referencia do produto {{ product.reference }}</p>
<pre>
2)
function append_recipes(product){
  recipes_quantity = product.recipes.length;

  if(recipes_quantity > 3){ recipes_quantity = 3; }

  for(i = 0;i < recipes_quantity; i++){
    console.log(product.recipes[i].fields.imagem.fields.file.url)
    console.log(product.recipes[i].fields.title)
    console.log(product.recipes[i].fields.description)
  }
}
</pre>
<div></div><br>
<pre>
3)
// via .liquid
<span><</span>script type="text/javascript">
  var product_ref = '{{ product.reference }}';
  product_for_reference(product_ref, append_recipes);
<span><</span>/script>
</pre>
<!-- // -->

<h3 id="incluir-busca-swiftype">Incluir busca swiftype</h3>
<pre>
// mudanças no .liquid
1) {{ meta_tags }} no layout, dentro do head

2) em product
{% contentfor meta_tags %}a
<span><</span>meta property="st:image" content="{{ product.image_url | resize: '185x' }}">
<span><</span>meta property='st:type' content='products' />
<span><</span>meta class="swiftype" name="name" data-type="string" content="{{ product.name }}" />
{% if product.on_sale%}
<span><</span>meta class="swiftype" name="price" data-type="float" content="{{ product | apply_discount | money_format }}" />
<span><</span>meta class="swiftype" name="original-price" data-type="float" content="{{ product.price  | money_format}}" />
{% else %}
<span><</span>meta class="swiftype" name="price" data-type="float" content="{{ product.price | money_format }}" />
<span><</span>meta class="swiftype" name="original-price" data-type="float" content="{{ product.price | money_format }}" />
{% endif %}
<span><</span>meta class="swiftype" name="on_sale" data-type="enum" content="{{ product.on_sale }}" />
<span><</span>meta class="swiftype" name="available" data-type="enum" content="{{ product.available }}" />
<span><</span>meta class="swiftype" name="score_booster" data-type="float" content="{% if product.available %}1{% else %}0{% endif %}" />
{% endcontentfor %}

3) ajustar meta property="st:image com o tamanho da imagem usada no liquid da busca
</pre>
<p>
  Os processos para implementar a busca do swiftype são:<br>
  1 - Acrescentar meta tags no .liquid<br>
</p>

<p>2 - Criar engine de busca<br>
<a href="/img/swiftype/print-1.png" data-featherlight="image" ><img src="/img/swiftype/print-1.png"></a>
<a href="/img/swiftype/print-2.png" data-featherlight="image" ><img src="/img/swiftype/print-2.png"></a>
<a href="/img/swiftype/print-3.png" data-featherlight="image" ><img src="/img/swiftype/print-3.png"></a>
<a href="/img/swiftype/print-4.png" data-featherlight="image" ><img src="/img/swiftype/print-4.png"></a>
</p>


<p>3- Nessa etapa, ele vai buscar o conteúdo em todo o site<br>
<a href="/img/swiftype/print-5.png" data-featherlight="image" ><img src="/img/swiftype/print-5.png"></a>
</p>

<p>4 - Depois que já tiverem sido encontradas todas as páginas, colocar o filtro<br>
<a href="/img/swiftype/print-6.png" data-featherlight="image" ><img src="/img/swiftype/print-6.png"></a>
<a href="/img/swiftype/print-7.png" data-featherlight="image" ><img src="/img/swiftype/print-7.png"></a>
</p>
<p>5 - As informações que precisam ser colocadas no admin<br>
<a href="/img/swiftype/print-8.png" data-featherlight="image" ><img src="/img/swiftype/print-8.png"></a>
<!-- // -->

<h3 id="Flickr">Flickr - criando galeria com jflickrfeed</h3>
<pre>
<span><</span>script src="jflickrfeed.min.js"><span><</span>/script>

<span><</span>ul class="slides"><span><</span>/ul>

$('.slides').jflickrfeed({
  limit: 14,
  qstrings: {
    id: '136314260@N04', // user name
    tags: 'A-CASA'
  },
  itemTemplate: '<span><</span>li><span><</span>img src="{{ image }}" alt="{{title}}" class="img-responsive" /><span><</span>/li>'
});
</pre>
<p>Através do plugin jflickrfeed.js é possível criar galerias de fotos.</p>
<p>O modelo de cadastro no flickr deve ser organizado por tags, ou seja, ao executar a função do jflickrfeed preencha os atributos id e tags da conta e monte o html no atributo itemTemplate</p>
<p>Segue o github <a href="https://github.com/vagnerolliver/jflickrfeed-js" class="laranja" target="_blank">/jflickrfeed-js</a> um exemplo pronto.</p>
<!-- // -->

<h3 id="Google-Maps-v3">Google Maps - Personalizando o Mapa no site</h3>
<p>Inserindo o mapa do google  maps em uma página do site  <a href="/img/places/retex.png" data-featherlight="image"><img src="/img/places/retex.png"></a></p>
<p>
Api de places carrega os dados cadastrados no  <a href="/img/places/lojas.png" data-featherlight="image" class="laranja">admin/lojas</a> em forma de um objeto  <a href="/img/places/place-js.png" class="laranja" data-featherlight="image">json.</a><br>
**obs: para ativar o recurso do places solicite via email para dev@vnda.com.br.</p>
<p>
Passo 1 - após efetivado o cadastro será gerado um token que servirá como parâmetro na url abaixo:<br>
<b class="gi">http://vnda-places.herokuapp.com/places.js?token=[token]&callback=</b><br>
**obs: o arquivo places.js da api está configurado para aceitar o parâmetro callback e executar, no <a href="https://github.com/vagnerolliver/Integracao-o-com-o-google-maps" class="laranja" target="_blank">exemplo a seguir</a> vamos executar a função loadShops que carregará as lojas cadastradas.
</p>
<p>
Passo 2 - cadastrar uma loja  no <a href="/img/places/lojas.png" data-featherlight="image" class="laranja">admin/lojas/nova</a><a href="/img/places/editar-lojas.png" data-featherlight="image"><img src="/img/places/editor-lojas.png"></a><br>
Após efetivar o cadastro confira a url do passo 1, o retorno será como este: <a href="/img/places/place-js.png" data-featherlight="image"><img src="/img/places/place-js.png"></a><br>
**obs: para facilitar a leitura do arquivo instale a extensão para chrome JSON FORMATER.
</p>
<p>
Passo 3 - criar função que vai iniciar o mapa na página do site.<br>
**obs: o script do passo 4 é um exemplo que pode ser tomado com base para criar outros tipos de aplicações que vão variar conforme a necessidade do layout. Ao encontrar dúvidas procure <a href="/img/places/place-js.png" class="laranja" target="_blank">estudar a documentação do google maps</a> e como manipular objetos no javascript.
</p>
<p>Passo 4 - Modelo usado na loja da <a href="http://www.retex.com.br/p/encontre-uma-loja-retex" class="laranja" target="_blank">Retex</a> - <a href="https://github.com/vagnerolliver/Integracao-o-com-o-google-maps" class="laranja" target="_blank">ver cógido no github</a></p>

<!-- // -->

<h3 id="template-do-zendesk">Personalizando o Template Zendesk</h3>
<p>Com seu usuário logado acesse o <a href="/img/zendesk/painel-de-personalizacao.png" data-featherlight="image" class="laranja">painel de personalização <img src="/img/zendesk/painel-de-personalizacao.png"></a></p>
<p>Clique [mudar tema ] e selecione o template <a href="/img/zendesk/mudar-tema.png" data-featherlight="image" class="laranja">Temas personalizados<img src="/img/zendesk/mudar-tema.png"></a>
<a href="/img/zendesk/mudar-tema.png" data-featherlight="image" class="laranja"><img src="/img/zendesk/mudar-tema.png"></a></p>
<p>Utilize o editor de código do zendesk para atualizar as páginas, css e javascript do tema<a href="/img/zendesk/editor-zendesk.png" data-featherlight="image" class="laranja"><img src="/img/zendesk/editor-zendesk.png"></a></p>
<p>Abra os links abaixo, copie os código e atualize-os arquivos usando o editor.</p>
<p><a href="https://gist.github.com/vagnerolliver/5afc8e857e68e806deef" class="laranja" target="_blank">Template da página inicial - ver código</a></p>
<p><a href="https://gist.github.com/vagnerolliver/a6bd419e0539ab15fa92" class="laranja" target="_blank">Template da página categoria - ver código</a></p>
<p><a href="https://gist.github.com/vagnerolliver/7d82996f6c0423285c39" class="laranja" target="_blank">Template da página produto - ver código</a></p>
<p><a href="https://gist.github.com/vagnerolliver/b669860c5954f54265d5" class="laranja" target="_blank">CSS do Template Zendesk - ver código</a></p>
<p><a href="https://gist.github.com/vagnerolliver/0d6939482c66d4d62d67" class="laranja" target="_blank">JS do Template Zendesk - ver código</a></p>
<p>Selecione o template ou arquivo a ser atualizado <a href="/img/zendesk/editar-tema-pagina-inicial.png" data-featherlight="image"><img src="/img/zendesk/editar-tema-pagina-inicial.png"></a></p>

<p> </p><br>
<p> </p><br>
<!-- // -->

<h3 id="vimeo">Vimeo</h3>
<pre>
// Alterar os dados abaixo para sua conta
var vimeoUserName = '940516';

// Tipo de dados do callback
 var videosCallback = 'showThumbs';

// Url para fazer a requisão
var videosUrl = 'https://vimeo.com/api/v2/channel/' + vimeoUserName + '/videos.json?callback=' + videosCallback;

Faça o download: https://vimeo.com/api/v2/channel/940516/videos.json?callback=showThumbs

Função completa publicada no <a href="https://github.com/vagnerolliver/Vimeo-Api-videosCallback/blob/master/galeria-vimeo.html" target="_blank">github</a>
</pre>
<p>Vimeo disponibiliza em sua api de integrações recursos de callback com respostas no formato json que facilmente com ajuda de jquery você pode criar galerias e consequemente efeitos lightbox após o carramento na página.</p>
<p>Disponibilizamos no github um exemplo de <a href="https://github.com/vagnerolliver/Vimeo-Api-videosCallback/blob/master/galeria-vimeo.html" class="laranja" target="_blank">galeria de vídeos</a>.</p>
<p>Importante: formato json da resposta de requisação da api do vimeo<a href="/img/vimeo.png" class="laranja" data-featherlight="image"><img src="/img/vimeo.png"></a></p>
      </div><!-- content -->

    <div class="dark-box"></div>
  </div>


  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NWR79T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-NWR79T');</script>
  <!-- End Google Tag Manager -->

  <script src="js/jquery-ui-1.9.1.custom.min.js"></script>
  <script src="js/jquery.tocify.js"></script>
  <script src="js/featherlight.js" type="text/javascript" charset="utf-8"></script>


  <script>
    $(function() {
      var toc = $("#headings").tocify({
        selectors: "h2,h3,h4,h5,h6",
        scrollHistory: true,
        hashGenerator: function(text, element) {
          return element[0].getAttribute('id');
        }
      }).data("toc-tocify");
    });
    $( document ).load(function() {
      var heightBodyHtml =  $( ".sidebar #container" ).height();
      $( "html,body" ).height( heightBodyHtml )
    });
  </script>
</body>
</html>
